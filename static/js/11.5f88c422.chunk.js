(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[11,6,8],{607:function(e,t,n){"use strict";var a=n(11);n(5);t.a=function(e){return e.loading?Object(a.jsx)("span",{className:"spinner-border spinner-border-sm"}):e.iconClass?Object(a.jsx)("i",{className:e.iconClass}):null}},608:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(15),r=n(16),c=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"errorMessage",value:function(e,t,n,a){var r,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(c)return c;if(!a&&!n[e])return null;var s=t[e];return(null===s||void 0===s||null===(r=s[0])||void 0===r?void 0:r.message)||(null===s||void 0===s?void 0:s.message)||s||null}}]),e}()},609:function(e,t,n){"use strict";var a=n(127);function r(){var e=Object(a.a)(["\n  margin-top: 16px;\n  padding: 24px;\n  background-color: white;\n  width: 100%;\n  border-radius: 5px;\n  border: 1px solid #dee2e6 !important;\n"]);return r=function(){return e},e}var c=n(128).a.div(r());t.a=c},610:function(e,t,n){"use strict";var a=n(127);function r(){var e=Object(a.a)(["\n  margin-bottom: 24px;\n"]);return r=function(){return e},e}var c=n(128).a.h1(r());t.a=c},611:function(e,t,n){"use strict";var a=n(127),r=n(11),c=(n(5),n(85));function s(){var e=Object(a.a)(["\n  .breadcrumb {\n    font-size: 13px;\n    margin: 0px;\n    padding: 0px;\n    background-color: transparent;\n  }\n\n  .breadcrumb-item:not(.active) a {\n    color: rgba(0, 0, 0, 0.45);\n  }\n"]);return s=function(){return e},e}var i=n(128).a.nav(s());t.a=function(e){var t=function(e){return e.length>1};return Object(r.jsx)(i,{children:Object(r.jsx)("ol",{className:"breadcrumb",children:e.items.map((function(n,a){return Object(r.jsx)("li",{className:"breadcrumb-item ".concat(e.items.length-1===a?"active":""),children:t(n)?Object(r.jsx)(c.a,{to:n[1],children:n[0]}):n[0]},n[0])}))})})}},612:function(e,t,n){"use strict";var a=n(11);n(5);t.a=function(){return Object(a.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:Object(a.jsx)("div",{className:"spinner-border text-primary"})})}},613:function(e,t,n){"use strict";var a=n(11),r=(n(5),n(606)),c=n(608);function s(e){var t=e.defaultValue,n=e.label,s=e.name,i=e.hint,o=e.type,l=e.placeholder,u=e.autoFocus,d=e.autoComplete,b=e.required,m=e.externalErrorMessage,j=e.disabled,f=e.endAdornment,O=Object(r.d)(),p=O.register,h=O.errors,x=O.formState,v=x.touched,g=x.isSubmitted,C=c.a.errorMessage(s,h,v,g,m);return Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsxs)("div",{className:f?"input-group":"",children:[Boolean(n)&&Object(a.jsx)("label",{className:"col-form-label ".concat(b?"required":null),htmlFor:s,children:n}),Object(a.jsx)("input",{value:t,id:s,name:s,type:o,ref:p,onChange:function(t){e.onChange&&e.onChange(t.target.value)},onBlur:function(t){e.onBlur&&e.onBlur(t)},placeholder:l||void 0,autoFocus:u||void 0,autoComplete:d||void 0,disabled:j,className:"form-control ".concat(C?"is-invalid":"")}),f&&Object(a.jsx)("div",{className:"input-group-append",children:Object(a.jsx)("span",{className:"input-group-text",children:f})})]}),Object(a.jsx)("div",{className:"invalid-feedback",children:C}),Boolean(i)&&Object(a.jsx)("small",{className:"form-text text-muted",children:i})]})}s.defaultProps={type:"text",required:!1},t.a=s},616:function(e,t,n){"use strict";var a=n(19),r=n(39),c=n(2),s=n(55),i=n.n(s),o={generic:e=>r.c().label(e),string(e,t){t=t||{};var n=r.h().transform((function(e,t){return""===t?null:e})).nullable(!0).trim().label(e);return t.required&&(n=n.required()),(t.min||0===t.min)&&(n=n.min(t.min)),t.max&&(n=n.max(t.max)),t.matches&&(n=n.matches(t.matches)),n},boolean:(e,t)=>r.b().default(!1).label(e),relationToOne(e,t){t=t||{};var n=r.c().nullable(!0).label(e).transform((function(e,t){return t?t.id:null}));return t.required&&(n=n.required()),n},stringArray(e,t){t=t||{};var n=r.a().compact().ensure().of(r.h().transform((function(e,t){return""===t?null:e})).trim()).label(e);return(t.required||t.min)&&(n=n.required()),t.min||0===t.min?n=n.min(t.min):t.required&&(n=n.min(1)),t.max&&(n=n.max(t.max)),n},relationToMany(e,t){t=t||{};var n=r.a().nullable(!0).label(e).transform((function(e,t){return t&&t.length?t.map((function(e){return e.id})):[]}));return(t.required||t.min)&&(n=n.required()),t.min||0===t.min?n=n.min(t.min):t.required&&(n=n.min(1)),t.max&&(n=n.max(t.max)),n},integer(e,t){t=t||{};var n=r.d().transform((function(e,t){return""===t?null:e})).integer().nullable(!0).label(e);return t.required&&(n=n.required()),(t.min||0===t.min)&&(n=n.min(t.min)),t.max&&(n=n.max(t.max)),n},images(e,t){t=t||{};var n=r.a().nullable(!0).label(e);return(t.required||t.min)&&(n=n.required()),t.min||0===t.min?n=n.min(t.min):t.required&&(n=n.min(1)),t.max&&(n=n.max(t.max)),n},files(e,t){t=t||{};var n=r.a().compact().ensure().nullable(!0).label(e);return(t.required||t.min)&&(n=n.required()),t.min||0===t.min?n=n.min(t.min):t.required&&(n=n.min(1)),t.max&&(n=n.max(t.max)),n},enumerator(e,t){t=t||{};var n=r.h().transform((function(e,t){return""===t?null:e})).label(e).nullable(!0).oneOf([null].concat(Object(a.a)(t.options||[])));return t.required&&(n=n.required(Object(c.c)("validation.string.selected"))),n},email(e,t){t=t||{};var n=r.h().transform((function(e,t){return""===t?null:e})).nullable(!0).trim().label(e).email();return t.required&&(n=n.required()),(t.min||0===t.min)&&(n=n.min(t.min)),t.max&&(n=n.max(t.max)),t.matches&&(n=n.matches(t.matches)),n},decimal(e,t){t=t||{};var n=r.d().transform((function(e,t){return""===t?null:e})).nullable(!0).label(e);return t.required&&(n=n.required()),(t.min||0===t.min)&&(n=n.min(t.min)),t.max&&(n=n.max(t.max)),n},datetime(e,t){t=t||{};var n=r.c().nullable(!0).label(e).transform((function(e,t){return e?i()(t,"YYYY-MM-DD HH:mm").toISOString():null}));return t.required&&(n=n.required()),n},date(e,t){t=t||{};var n=r.c().nullable(!0).label(e).test("is-date",Object(c.c)("validation.mixed.default"),(function(e){return!e||i()(e,"YYYY-MM-DD").isValid()})).transform((function(e){return e?i()(e).format("YYYY-MM-DD"):null}));return t.required&&(n=n.required()),n}};t.a=o},620:function(e,t,n){"use strict";var a=n(127);function r(){var e=Object(a.a)(["\n  padding-top: 0;\n  padding-bottom: 0;\n\n  label.required::before {\n    display: inline-block;\n    margin-right: 4px;\n    content: '*';\n    line-height: 1;\n    font-size: 13px;\n    color: #f5222d;\n  }\n\n  .react-datepicker-wrapper {\n    width: 100%;\n  }\n\n  .react-datepicker-popper{\n    margin-top: 50px !important;\n  }\n\n  .custom-control {\n    z-index: 0;\n  }\n\n  .invalid-feedback {\n    display: block;\n  }\n\n  .form-buttons {\n    padding-top: 16px;\n\n    .btn {\n      margin-right: 8px;\n      margin-bottom: 8px;\n    }\n  }\n"]);return r=function(){return e},e}var c=n(128).a.div(r());t.a=c},622:function(e,t,n){"use strict";var a=n(4),r=n(29),c=n(57),s=n(129),i=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.userRead)})),o=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.userEdit)})),l=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.userDestroy)})),u={selectPermissionToRead:i,selectPermissionToEdit:o,selectPermissionToCreate:Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.userCreate)})),selectPermissionToImport:Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.userImport)})),selectPermissionToDestroy:l};t.a=u},623:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(145),r=n(1),c=n.n(r),s=n(3),i=n(15),o=n(16),l=n(625),u=n.n(l),d=n(2),b=n(9),m=n(664),j=n(8),f=n(262),O=n.n(f),p=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"validate",value:function(e,t){if(t){if(t.image&&!e.type.startsWith("image"))throw new Error(Object(d.c)("fileUploader.image"));if(t.storage.maxSizeInBytes&&e.size>t.storage.maxSizeInBytes)throw new Error(Object(d.c)("fileUploader.size",u()(t.storage.maxSizeInBytes)));var n=h(e.name);if(t.formats&&!t.formats.includes(n))throw new Error(Object(d.c)("fileUploader.formats",t.formats.join(", ")))}}},{key:"upload",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){var a,r,s,i,o,l,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,this.validate(t,n),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 7:return a=h(t.name),r=Object(m.a)(),s="".concat(r,".").concat(a),e.next=12,this.fetchFileCredentials(s,n);case 12:return i=e.sent,o=i.uploadCredentials,l=i.downloadUrl,u=i.privateUrl,e.next=18,this.uploadToServer(t,o);case 18:return e.abrupt("return",{id:r,name:t.name,sizeInBytes:t.size,publicUrl:o&&o.publicUrl?o.publicUrl:null,privateUrl:u,downloadUrl:l,new:!0});case 19:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchFileCredentials",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){var a,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j.a.get(),e.next=3,b.a.get("/tenant/".concat(a,"/file/credentials"),{params:{filename:t,storageId:n.storage.id}});case 3:return r=e.sent,s=r.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"uploadToServer",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,s,i,o,l,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,r=n.url,s=new FormData,i=0,o=Object.entries(n.fields||{});i<o.length;i++)l=Object(a.a)(o[i],2),u=l[0],d=l[1],s.append(u,d);return s.append("file",t),e.abrupt("return",O.a.post(r,s,{headers:{"Content-Type":"multipart/form-data"}}));case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function h(e){if(!e)return null;var t=/(?:\.([^.]+))?$/.exec(e);return t?t[1]:null}},624:function(e,t,n){"use strict";var a=n(0),r=n(19),c=n(1),s=n.n(c),i=n(3),o=n(145),l=n(11),u=n(5),d=n(608),b=n(628),m=n(2),j=n(606),f=n(646),O=n.n(f);function p(e){var t=Object(j.d)(),n=t.errors,c=t.watch,f=t.setValue,p=t.register,h=t.formState,x=h.touched,v=h.isSubmitted,g=e.label,C=e.name,y=e.hint,N=e.placeholder,w=e.autoFocus,k=e.externalErrorMessage,T=e.mode,S=e.required,q=e.isClearable,I=e.mapper,E=e.fetchFn,V=c(C),L=Object(u.useState)([]),M=Object(o.a)(L,2),B=M[0],U=M[1],A=Object(u.useState)(!1),P=Object(o.a)(A,2),R=P[0],F=P[1];Object(u.useEffect)((function(){p({name:C})}),[p,C]),Object(u.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.prev=1,e.next=4,E();case 4:t=(t=e.sent).map((function(e){return I.toAutocomplete(e)})),U(t),F(!1),e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),U([]),F(!1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}})()().then((function(){}))}),[]);var D=function(e){return(B||[]).find((function(t){return t.value===e.value}))||e},Y=function(){return"multiple"===T?_():$()},_=function(){return V?V.map((function(e){return D(I.toAutocomplete(e))})):[]},$=function(){return V?D(I.toAutocomplete(V)):null},z=function(t){if(!t)return f(C,[],{shouldValidate:!0}),void(e.onChange&&e.onChange([]));var n=t.map((function(e){return I.toValue(e)}));f(C,n,{shouldValidate:!0}),e.onChange&&e.onChange(n)},G=function(t){if(!t)return f(C,null,{shouldValidate:!0}),void(e.onChange&&e.onChange(null));var n=I.toValue(t);f(C,n,{shouldValidate:!0}),e.onChange&&e.onChange(n)},H=R?Object(m.c)("autocomplete.loading"):y,Q=d.a.errorMessage(C,n,x,v,k),W=Boolean(Q)?{control:function(e){return Object(a.a)(Object(a.a)({},e),{},{borderColor:"red"})}}:void 0;return Object(l.jsxs)("div",{className:"form-group",children:[Boolean(g)&&Object(l.jsx)("label",{className:"col-form-label ".concat(S?"required":null),htmlFor:C,children:g}),Object(l.jsxs)("div",{style:{display:"flex"},children:[Object(l.jsx)(b.a,{className:"w-100",styles:W,id:C,name:C,isMulti:"multiple"===T,placeholder:N||"",autoFocus:w||void 0,onChange:function(e){return"multiple"===T?z(e):G(e)},value:Y(),isClearable:q,options:function(){var t=e.mode;return B?Y()?"multiple"===t?O()([].concat(Object(r.a)(B),Object(r.a)(Y())),"value"):O()([].concat(Object(r.a)(B),[Y()]),"value"):B:[]}(),onBlur:function(t){e.onBlur&&e.onBlur(t)},loadingMessage:function(){return Object(m.c)("autocomplete.loading")},noOptionsMessage:function(){return Object(m.c)("autocomplete.noOptions")}}),e.showCreate&&e.hasPermissionToCreate?Object(l.jsx)("button",{style:{marginLeft:"16px",flexShrink:0},className:"btn btn-primary",type:"button",onClick:e.onOpenModal,children:Object(l.jsx)("i",{className:"fas fa-plus"})}):null]}),Object(l.jsx)("div",{className:"invalid-feedback",children:Q}),Boolean(H)&&Object(l.jsx)("small",{className:"form-text text-muted",children:H})]})}p.defaultProps={isClearable:!0,mode:"default",required:!1},t.a=p},626:function(e,t,n){"use strict";var a=n(0),r=n(11),c=n(5),s=n(628),i=n(2),o=n(606),l=n(608);function u(e){var t=e.label,n=e.name,u=e.hint,d=e.options,b=e.required,m=e.mode,j=e.placeholder,f=e.isClearable,O=e.externalErrorMessage,p=Object(o.d)(),h=p.register,x=p.errors,v=p.formState,g=v.touched,C=v.isSubmitted,y=p.setValue,N=p.watch,w=l.a.errorMessage(n,x,g,C,O),k=N(n);Object(c.useEffect)((function(){h({name:n})}),[h,n]);var T=function(){return k?k.map((function(e){return d.find((function(t){return t.value===e}))})):[]},S=function(){var t=e.options;return null!=k?t.find((function(e){return e.value===k})):null},q=function(t){if(!t)return y(n,[],{shouldValidate:!0}),void(e.onChange&&e.onChange([]));var a=t.map((function(e){return e?e.value:e})).filter((function(e){return null!=e}));y(n,a,{shouldValidate:!0}),e.onChange&&e.onChange(a)},I=function(t){if(!t)return y(n,null,{shouldValidate:!0}),void(e.onChange&&e.onChange(null));y(n,t.value,{shouldValidate:!0}),e.onChange&&e.onChange(t.value)},E=Boolean(w)?{container:function(e){return Object(a.a)(Object(a.a)({},e),{},{color:"hsl(0,0%,20%)"})},control:function(e){return Object(a.a)(Object(a.a)({},e),{},{borderColor:"red"})}}:{container:function(e){return Object(a.a)(Object(a.a)({},e),{},{color:"hsl(0,0%,20%)"})}};return Object(r.jsxs)("div",{className:"form-group",children:[Boolean(t)&&Object(r.jsx)("label",{className:"col-form-label ".concat(b?"required":null),children:t}),Object(r.jsx)("br",{}),Object(r.jsx)(s.a,{className:"w-100",value:"multiple"===e.mode?T():S(),onChange:function(t){return"multiple"===e.mode?q(t):I(t)},onBlur:function(t){e.onBlur&&e.onBlur(t)},id:n,name:n,options:d,isMulti:"multiple"===m,placeholder:j||"",isClearable:f,styles:E,loadingMessage:function(){return Object(i.c)("autocomplete.loading")},noOptionsMessage:function(){return Object(i.c)("autocomplete.noOptions")}}),Object(r.jsx)("div",{className:"invalid-feedback",children:w}),Boolean(u)&&Object(r.jsx)("small",{className:"form-text text-muted",children:u})]})}u.defaultProps={required:!1,isClearable:!0},t.a=u},627:function(e,t,n){"use strict";var a=n(127);function r(){var e=Object(a.a)(["\n  .btn.btn-link {\n    padding-left: 0;\n  }\n"]);return r=function(){return e},e}var c=n(128).a.div(r());t.a=c},645:function(e,t,n){"use strict";var a=n(1),r=n.n(a),c=n(19),s=n(3),i=n(145),o=n(11),l=n(5),u=n(623),d=n(6),b=n(2),m=n(607);t.a=function(e){var t=Object(l.useState)(!1),n=Object(i.a)(t,2),a=n[0],j=n[1],f=Object(l.useRef)(),O=function(){var t=e.value;return t?Array.isArray(t)?t:[t]:[]},p=function(){var t=Object(s.a)(r.a.mark((function t(n){var a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(a=n.target.files)&&a.length){t.next=4;break}return t.abrupt("return");case 4:return s=a[0],u.a.validate(s,{storage:e.storage,formats:e.formats}),j(!0),t.next=9,u.a.upload(s,{storage:e.storage,formats:e.formats});case 9:s=t.sent,f.current.value="",j(!1),e.onChange([].concat(Object(c.a)(O()),[s])),t.next=21;break;case 15:t.prev=15,t.t0=t.catch(0),f.current.value="",console.error(t.t0),j(!1),d.a.showMessage(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),h=e.max,x=e.readonly,v=Object(o.jsxs)("label",{className:"btn btn-outline-secondary px-4 mb-2",style:{cursor:"pointer"},children:[Object(o.jsx)(m.a,{loading:a,iconClass:"fas fa-plus"})," ",Object(b.c)("fileUploader.upload"),Object(o.jsx)("input",{style:{display:"none"},disabled:a||x,accept:function(){var t=e.schema;if(t&&t.formats)return t.formats.map((function(e){return".".concat(e)})).join(",")}(),type:"file",onChange:p,ref:f})]});return Object(o.jsxs)("div",{children:[x||h&&O().map((function(e){return{uid:e.id||void 0,name:e.name,status:"done",url:e.downloadUrl}})).length>=h?null:v,O()&&O().length?Object(o.jsx)("div",{children:O().map((function(t){return Object(o.jsxs)("div",{children:[Object(o.jsx)("i",{className:"fas fa-link text-muted mr-2"}),Object(o.jsx)("a",{href:t.downloadUrl,target:"_blank",rel:"noopener noreferrer",download:!0,children:t.name}),!x&&Object(o.jsx)("button",{className:"btn btn-link",type:"button",onClick:function(){return n=t.id,void e.onChange(O().filter((function(e){return e.id!==n})));var n},children:Object(o.jsx)("i",{className:"fas fa-times"})})]},t.id)}))}):null]})}},647:function(e,t,n){"use strict";var a=n(1),r=n.n(a),c=n(3),s=n(145),i=n(11),o=n(5),l=n(121),u=n.n(l),d=n(2),b=n(672),m=n(6),j=n(80);t.a=function(e){var t=Object(o.useRef)(),n=Object(o.useState)(!1),a=Object(s.a)(n,2),l=a[0],f=a[1];Object(o.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);var O=function(){var n=Object(c.a)(r.a.mark((function n(a,c){var s,i;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,f(!0),n.next=4,j.a.create(c);case 4:return n.next=6,j.a.fetchUsers({email:c.emails[0]},null,1,0);case 6:s=n.sent,i=s.rows,window.$(t.current).modal("hide"),e.onSuccess(i[0]),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),m.a.handle(n.t0);case 15:return n.prev=15,f(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[0,12,15,18]])})));return function(e,t){return n.apply(this,arguments)}}();return u.a.createPortal(Object(i.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:Object(i.jsx)("div",{className:"modal-dialog modal-lg",children:Object(i.jsxs)("div",{className:"modal-content",children:[Object(i.jsxs)("div",{className:"modal-header",children:[Object(i.jsx)("h5",{className:"modal-title",children:Object(d.c)("user.new.titleModal")}),Object(i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:Object(i.jsx)("span",{children:"\xd7"})})]}),Object(i.jsx)("div",{className:"modal-body",children:Object(i.jsx)(b.a,{saveLoading:l,onSubmit:O,onCancel:function(){window.$(t.current).modal("hide")},modal:!0,single:!0})})]})})}),document.getElementById("modal-root"))}},652:function(e,t,n){"use strict";var a=n(0),r=n(19),c=n(145),s=n(11),i=n(5),o=n(80),l=n(647),u=n(624),d=n(606),b=n(35),m=n(622);t.a=function(e){var t=Object(d.d)(),n=t.setValue,j=t.getValues,f=Object(i.useState)(!1),O=Object(c.a)(f,2),p=O[0],h=O[1],x=Object(b.e)(m.a.selectPermissionToCreate),v={toAutocomplete(e){if(!e)return null;if(e.fullName||e.email){var t=e.email;return e.fullName&&(t="".concat(e.fullName," <").concat(e.email,">")),{value:e.id,label:t}}return{value:e.id,label:e.label}},toValue:e=>e?{id:e.value,label:e.label}:null};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(u.a,Object(a.a)(Object(a.a)({},e),{},{fetchFn:function(e,t){return o.a.fetchUserAutocomplete(e,t)},mapper:v,onOpenModal:function(){return h(!0)},hasPermissionToCreate:x})),p&&Object(s.jsx)(l.a,{visible:p,onClose:function(){return h(!1)},onSuccess:function(t){var a=e.name,c=e.mode;n(a,c&&"multiple"===c?[].concat(Object(r.a)(j()[a]||[]),[t]):t),h(!1)}})]})}},654:function(e,t,n){"use strict";var a=n(11),r=(n(5),n(606)),c=n(608);function s(e){var t=e.defaultValue,n=e.maxValue,s=e.label,i=e.name,o=e.hint,l=e.type,u=e.placeholder,d=e.autoFocus,b=e.autoComplete,m=e.required,j=e.externalErrorMessage,f=e.disabled,O=Object(r.d)(),p=O.register,h=O.errors,x=O.formState,v=x.touched,g=x.isSubmitted,C=c.a.errorMessage(i,h,v,g,j);return Object(a.jsxs)("div",{className:"form-group",children:[Boolean(s)&&Object(a.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:i,children:s}),Object(a.jsx)("input",{value:t,max:n,id:i,name:i,type:l,ref:p,onChange:function(t){e.onChange&&e.onChange(t.target.value)},onBlur:function(t){e.onBlur&&e.onBlur(t)},placeholder:u||void 0,autoFocus:d||void 0,autoComplete:b||void 0,disabled:f,className:"form-control ".concat(C?"is-invalid":"")}),Object(a.jsx)("div",{className:"invalid-feedback",children:C}),Boolean(o)&&Object(a.jsx)("small",{className:"form-text text-muted",children:o})]})}s.defaultProps={type:"number",required:!1},t.a=s},665:function(e,t,n){"use strict";var a=n(11),r=n(5),c=n(606),s=n(608),i=n(234),o=n.n(i);n(669);function l(e){var t=e.label,n=e.name,i=e.hint,l=e.placeholder,u=e.autoFocus,d=e.externalErrorMessage,b=e.required,m=e.showTimeInput,j=Object(c.d)(),f=j.register,O=j.errors,p=j.formState,h=p.touched,x=p.isSubmitted,v=j.setValue,g=j.watch;Object(r.useEffect)((function(){f({name:n})}),[f,n]);var C=s.a.errorMessage(n,O,h,x,d);return Object(a.jsxs)("div",{className:"form-group",children:[Boolean(t)&&Object(a.jsx)("label",{className:"col-form-label ".concat(b?"required":null),htmlFor:n,children:t})," ",Object(a.jsx)("br",{}),Object(a.jsx)(o.a,{popperPlacement:"right",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",id:n,name:n,className:"form-control ".concat(C?"is-invalid":""),onChange:function(t){v(n,t,{shouldValidate:!0}),e.onChange&&e.onChange(t)},onBlur:function(t){e.onBlur&&e.onBlur(t)},selected:g(n),showTimeInput:m,placeholderText:l||"",autoFocus:u||void 0,autoComplete:"off",dateFormat:"dd-MM-yyyy",timeIntervals:15}),Object(a.jsx)("div",{className:"invalid-feedback",children:C}),Boolean(i)&&Object(a.jsx)("small",{className:"form-text text-muted",children:i})]})}l.defaultProps={required:!1},t.a=l},666:function(e,t,n){"use strict";var a=n(1),r=n.n(a),c=n(19),s=n(3),i=n(145),o=n(11),l=n(5),u=n(623),d=n(6),b=n(2),m=n(127),j=n(128);function f(){var e=Object(m.a)(["\n  .img-card:hover .img-buttons {\n    display: block;\n  }\n\n  .img-buttons {\n    display: none;\n    position: relative;\n    bottom: 2.1rem;\n    width: calc(100px);\n    text-align: center;\n    background-color: rgba(0, 0, 0, 0.5);\n  }\n\n  .img-buttons * {\n    color: white;\n  }\n"]);return f=function(){return e},e}var O=j.a.div(f());function p(){var e=Object(m.a)(["\n  /* The Modal (background) */\n  .modal {\n    display: block;\n    position: fixed; /* Stay in place */\n    z-index: 9999; /* Sit on top */\n    padding-top: 100px; /* Location of the box */\n    left: 0;\n    top: 0;\n    width: 100%; /* Full width */\n    height: 100%; /* Full height */\n    overflow: auto; /* Enable scroll if needed */\n    background-color: rgb(0, 0, 0); /* Fallback color */\n    background-color: rgba(\n      0,\n      0,\n      0,\n      0.9\n    ); /* Black w/ opacity */\n  }\n\n  /* Modal Content (Image) */\n  .modal-content {\n    margin: auto;\n    display: block;\n    width: 80%;\n    max-width: 700px;\n  }\n\n  /* Caption of Modal Image (Image Text) - Same Width as the Image */\n  #caption {\n    margin: auto;\n    display: block;\n    width: 80%;\n    max-width: 700px;\n    text-align: center;\n    color: #ccc;\n    padding: 10px 0;\n    height: 150px;\n  }\n\n  /* Add Animation - Zoom in the Modal */\n  .modal-content,\n  #caption {\n    animation-name: zoom;\n    animation-duration: 0.6s;\n  }\n\n  @keyframes zoom {\n    from {\n      transform: scale(0);\n    }\n    to {\n      transform: scale(1);\n    }\n  }\n\n  /* The Close Button */\n  .close {\n    position: absolute;\n    top: 15px;\n    right: 35px;\n    color: #f1f1f1;\n    font-size: 40px;\n    font-weight: bold;\n    transition: 0.3s;\n  }\n\n  .close:hover,\n  .close:focus {\n    color: #bbb;\n    text-decoration: none;\n    cursor: pointer;\n  }\n\n  /* 100% Image Width on Smaller Screens */\n  @media only screen and (max-width: 700px) {\n    .modal-content {\n      width: 100%;\n    }\n  }\n"]);return p=function(){return e},e}var h=j.a.div(p());var x=function(e){return Object(o.jsx)(h,{children:Object(o.jsxs)("div",{className:"modal",children:[Object(o.jsx)("span",{className:"close",onClick:e.onClose,children:"\xd7"}),Object(o.jsx)("img",{className:"modal-content",src:e.src,alt:e.alt})]})})},v=n(607);t.a=function(e){var t=Object(l.useState)(!1),n=Object(i.a)(t,2),a=n[0],m=n[1],j=Object(l.useState)(null),f=Object(i.a)(j,2),p=f[0],h=f[1],g=Object(l.useRef)(),C=function(){var t=e.value;return t?Array.isArray(t)?t:[t]:[]},y=function(){var t=Object(s.a)(r.a.mark((function t(n){var a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(a=n.target.files)&&a.length){t.next=4;break}return t.abrupt("return");case 4:return s=a[0],u.a.validate(s,{storage:e.storage,image:!0}),m(!0),t.next=9,u.a.upload(s,{storage:e.storage,image:!0});case 9:s=t.sent,g.current.value="",m(!1),e.onChange([].concat(Object(c.a)(C()),[s])),t.next=21;break;case 15:t.prev=15,t.t0=t.catch(0),g.current.value="",console.error(t.t0),m(!1),d.a.showMessage(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),N=e.max,w=e.readonly,k=Object(o.jsxs)("label",{className:"btn btn-outline-secondary px-4 mb-2",style:{cursor:"pointer"},children:[Object(o.jsx)(v.a,{loading:a,iconClass:"fas fa-plus"})," ",Object(b.c)("fileUploader.upload"),Object(o.jsx)("input",{style:{display:"none"},disabled:a||w,accept:"image/*",type:"file",onChange:y,ref:g})]});return Object(o.jsxs)(O,{children:[w||N&&C().map((function(e){return{uid:e.id||void 0,name:e.name,status:"done",url:e.downloadUrl}})).length>=N?null:k,C()&&C().length?Object(o.jsx)("div",{className:"d-flex flex-row flex-wrap",children:C().map((function(t){return Object(o.jsxs)("div",{className:"mr-2 mb-2 img-card",style:{height:"100px"},children:[Object(o.jsx)("img",{alt:t.name,src:t.downloadUrl,className:"img-thumbnail",style:{width:"100px",height:"100px",objectFit:"cover"}}),Object(o.jsxs)("div",{className:"img-buttons rounded-bottom",children:[Object(o.jsx)("button",{type:"button",className:"btn btn-link",onClick:function(){return function(e){h({src:e.downloadUrl,alt:e.name})}(t)},children:Object(o.jsx)("i",{className:"fas fa-search"})}),!w&&Object(o.jsx)("button",{type:"button",className:"btn btn-link ml-2",onClick:function(){return n=t.id,void e.onChange(C().filter((function(e){return e.id!==n})));var n},children:Object(o.jsx)("i",{className:"fas fa-times"})})]})]},t.id)}))}):null,p&&Object(o.jsx)(x,{src:p.src,alt:p.alt,onClose:function(){h(null)}})]})}},667:function(e,t,n){"use strict";var a=n(266),r={status:["active","invited","empty-permissions","inactive"],roles:Object.keys(a.a.values)};t.a=r},668:function(e,t,n){"use strict";var a=n(0),r=n(19),c=n(145),s=n(11),i=n(5),o=n(80),l=n(647),u=n(624),d=n(606),b=n(35),m=n(622);t.a=function(e){var t=Object(d.d)(),n=t.setValue,j=t.getValues,f=Object(i.useState)(!1),O=Object(c.a)(f,2),p=O[0],h=O[1],x=Object(b.e)(m.a.selectPermissionToCreate),v={toAutocomplete(e){if(!e)return null;if(e.fullName||e.email){var t=e.email;return e.fullName&&(t="".concat(e.fullName," <").concat(e.email,">")),{value:e.id,label:t}}return{value:e.id,label:e.label}},toValue:e=>e?{id:e.value,label:e.label}:null};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(u.a,Object(a.a)(Object(a.a)({},e),{},{fetchFn:function(e,t){return o.a.listAdherantAutocomplete(e,t)},mapper:v,onOpenModal:function(){return h(!0)},hasPermissionToCreate:x})),p&&Object(s.jsx)(l.a,{visible:p,onClose:function(){return h(!1)},onSuccess:function(t){var a=e.name,c=e.mode;n(a,c&&"multiple"===c?[].concat(Object(r.a)(j()[a]||[]),[t]):t),h(!1)}})]})}},670:function(e,t,n){"use strict";var a=n(15),r=n(16),c=n(2),s=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"labelOf",value:function(e){return this.values[e]?Object(c.c)("secteur.".concat(e,".label")):e}},{key:"descriptionOf",value:function(e){return this.values[e]?Object(c.c)("secteur.".concat(e,".description")):e}},{key:"values",get:function(){return{AGRO_ALIMENTAIRE:"AGRO-ALIMENTAIRE",ASSURANCES:"ASSURANCES",AUDIOVISUEL:"AUDIOVISUEL",BANCAIRE:"BANCAIRE",CHIMIE:"CHIMIE",COMPOSANTS_AUTOMOBILES:"COMPOSANTS AUTOMOBILES",DISTRIBUTION:"DISTRIBUTION",DISTRIBUTION_AUTOMOBILE:"DISTRIBUTION AUTOMOBILE",DIVERS:"DIVERS",FINANCIER:"FINANCIER",HOLDING:"HOLDING",IMMOBILIER:"IMMOBILIER",INDUSTRIEL:"INDUSTRIEL",LEASING:"LEASING",LOGISTIQUE_TRANSPORT:"LOGISTIQUE ET TRANSPORT",PHARMACEUTIQUE:"PHARMACEUTIQUE","SANT\xc9":"SANT\xc9",TOURSIME:"TOURSIME",INFORMATION_TECHNOLOGY:"INFORMATION TECHNOLOGY"}}}]),e}(),i={secteur:Object.keys(s.values)};t.a=i},671:function(e,t,n){"use strict";var a=n(15),r=n(16),c=n(2),s=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"labelOf",value:function(e){return this.values[e]?Object(c.c)("".concat(e)):e}},{key:"descriptionOf",value:function(e){return this.values[e]?Object(c.c)("etat.".concat(e,".description")):e}},{key:"values",get:function(){return{"c\xe9l\xe9bataire":"c\xe9l\xe9bataire","mari\xe9":"mari\xe9"}}}]),e}(),i={Etat:Object.keys(s.values)};t.a=i},672:function(e,t,n){"use strict";var a=n(0),r=n(145),c=n(11),s=n(606),i=n(2),o=n(5),l=n(613),u=n(626),d=n(654),b=n(665),m=n(620),j=n(607),f=n(39),O=n(616),p=n(667),h=n(618),x=n(670),v=n(55),g=n.n(v),C=n(671),y=n(668),N=n(614),w=n(615),k=f.e().shape({email:O.a.email(Object(i.c)("user.fields.email")),roles:O.a.stringArray(Object(i.c)("user.fields.roles"),{}),phoneNumber:O.a.string(Object(i.c)("phoneNumber"),{max:24}),secteur:O.a.enumerator(Object(i.c)("secteur"),{options:x.a.secteur}),employeur:O.a.string(Object(i.c)("Employeur"),{}),profession:O.a.string(Object(i.c)("Profession"),{}),adresse:O.a.string(Object(i.c)("adresse"),{}),fullName:O.a.string(Object(i.c)("fullName"),{}),cin:O.a.integer(Object(i.c)("cin"),{max:8}),date_naissance:O.a.date(Object(i.c)("Date Naissance"),{}),etat_civil:O.a.enumerator(Object(i.c)("user.fields.Etat_Civil"),{options:C.a.Etat}),status:O.a.enumerator(Object(i.c)("user.fields.status"),{options:p.a.status}),lien_facebook:O.a.string(Object(i.c)("Lien Facebook"),{}),parrain:O.a.relationToOne(Object(i.c)("user.fields.parrain"),{})}),T=f.e().shape({emails:f.a().label(Object(i.c)("user.fields.emails")).of(f.h().transform((function(e,t){return""===t?null:e})).email(Object(i.c)("user.validations.email")).label(Object(i.c)("user.fields.email")).max(255).required()).required().min(1),roles:O.a.stringArray(Object(i.c)("user.fields.roles"),{required:!1})});t.a=function(e){e.single;var t=e.saveLoading,n=e.user||{},f=e.single?k:T,O=Object(o.useState)((function(){return{emails:[],email:"",roles:[],phoneNumber:"",secteur:"",employeur:"",profession:"",adresse:"",fullName:"",cin:"",date_naissance:n.date_naissance?g()(n.date_naissance,"DD-MM-YYYY").toDate():null,etat_civil:"",status:[""],lien_facebook:"",parrain:""}})),p=Object(r.a)(O,1)[0],v=Object(s.c)({resolver:Object(h.yupResolver)(f),mode:"all",defaultValues:p}),S=function(t){var n=Object.assign({},t);n.roles[0]="membre",n.status="invited",n.parrain=n.parrain.id,n.email&&(n.emails=[n.email],delete n.email),e.onSubmit(null,n)},q=Object(o.useState)(new Date),I=Object(r.a)(q,2);return I[0],I[1],Object(c.jsx)(m.a,{children:Object(c.jsx)(s.a,Object(a.a)(Object(a.a)({},v),{},{children:Object(c.jsxs)("form",{onSubmit:v.handleSubmit(S),children:[Object(c.jsxs)(N.a,{style:{backgroundColor:"#f0f2f5",paddingBottom:"10px"},children:[Object(c.jsx)(w.a,{sm:4,children:Object(c.jsx)(l.a,{name:"emails[0]",label:Object(i.c)("user.fields.email"),required:!0})}),Object(c.jsx)(w.a,{sm:4,children:Object(c.jsx)(l.a,{name:"fullName",label:Object(i.c)("user.fields.fullName"),required:!0})}),Object(c.jsx)(w.a,{sm:4,children:Object(c.jsx)(l.a,{name:"phoneNumber",label:Object(i.c)("user.fields.phoneNumber"),autoComplete:"phoneNumber"})})]}),Object(c.jsxs)(N.a,{children:[Object(c.jsx)(w.a,{sm:4,children:Object(c.jsx)(u.a,{name:"secteur",label:Object(i.c)("user.fields.sector"),options:x.a.secteur.map((function(e){return{value:e,label:Object(i.c)("user.sector.".concat(e))}}))})}),Object(c.jsx)(w.a,{sm:4,children:Object(c.jsx)(l.a,{name:"employeur",label:Object(i.c)("user.fields.employer")})}),Object(c.jsx)(w.a,{sm:4,children:Object(c.jsx)(l.a,{name:"profession",label:Object(i.c)("user.fields.profession")})})]}),Object(c.jsxs)(N.a,{style:{backgroundColor:"#f0f2f5",paddingBottom:"10px"},children:[Object(c.jsx)(w.a,{sm:4,children:Object(c.jsx)(l.a,{name:"adresse",label:Object(i.c)("user.fields.address")})}),Object(c.jsx)(w.a,{sm:4,children:Object(c.jsx)(d.a,{name:"cin",label:Object(i.c)("C.I.N")})}),Object(c.jsx)(w.a,{sm:4,children:Object(c.jsx)(b.a,{name:"date_naissance",label:Object(i.c)("user.fields.birthDate")})})]}),Object(c.jsxs)(N.a,{children:[Object(c.jsx)(w.a,{sm:4,children:Object(c.jsx)(u.a,{name:"etat_civil",label:Object(i.c)("user.fields.maritalStatus"),options:C.a.Etat.map((function(e){return{value:e,label:Object(i.c)("user.maritalStatus.".concat(e))}}))})}),Object(c.jsx)(w.a,{sm:4,children:Object(c.jsx)(l.a,{name:"lien_facebook",label:Object(i.c)("user.fields.facebookLink")})}),Object(c.jsx)(w.a,{sm:4,children:Object(c.jsx)(y.a,{name:"parrain",label:Object(i.c)("user.fields.sponsor"),showCreate:!e.modal})})]}),Object(c.jsxs)("div",{className:"form-buttons",children:[Object(c.jsxs)("button",{className:"btn btn-primary",disabled:t,type:"button",onClick:v.handleSubmit(S),children:[Object(c.jsx)(j.a,{loading:t,iconClass:"far fa-save"})," ",Object(i.c)("common.save")]}),Object(c.jsxs)("button",{disabled:t,onClick:function(){Object.keys(p).forEach((function(e){v.setValue(e,p[e])}))},className:"btn btn-light",type:"button",children:[Object(c.jsx)("i",{className:"fas fa-undo"})," ",Object(i.c)("common.reset")]}),e.onCancel?Object(c.jsxs)("button",{disabled:t,onClick:function(){return e.onCancel()},className:"btn btn-light",type:"button",children:[Object(c.jsx)("i",{className:"fas fa-times"})," ",Object(i.c)("common.cancel")]}):null]})]})}))})}},682:function(e,t,n){"use strict";var a=n(11),r=n(5),c=n(666),s=n(606),i=n(608);function o(e){var t=e.label,n=e.name,o=e.hint,l=e.storage,u=e.max,d=e.required,b=e.externalErrorMessage,m=Object(s.d)(),j=m.errors,f=m.formState,O=f.touched,p=f.isSubmitted,h=m.setValue,x=m.watch,v=m.register;Object(r.useEffect)((function(){v({name:n})}),[v,n]);var g=i.a.errorMessage(n,j,O,p,b);return Object(a.jsxs)("div",{className:"form-group",children:[Boolean(t)&&Object(a.jsx)("label",{className:"col-form-label ".concat(d?"required":null),htmlFor:n,children:t}),Object(a.jsx)("br",{}),Object(a.jsx)(c.a,{storage:l,value:x(n),onChange:function(t){h(n,t,{shouldValidate:!0}),e.onChange&&e.onChange(t)},max:u}),Object(a.jsx)("div",{className:"invalid-feedback",children:g}),Boolean(o)&&Object(a.jsx)("small",{className:"form-text text-muted",children:o})]})}o.defaultProps={max:void 0,required:!1},t.a=o},691:function(e,t,n){"use strict";var a=n(4),r=n(29),c=n(57),s=n(129),i=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.produitRead)})),o=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.produitEdit)})),l=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.produitCreate)})),u=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.produitImport)})),d={selectPermissionToRead:i,selectPermissionToEdit:o,selectPermissionToCreate:l,selectPermissionToDestroy:Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.produitDestroy)})),selectPermissionToImport:u};t.a=d},704:function(e,t,n){"use strict";var a=n(11),r=n(5),c=n(645),s=n(606),i=n(608);function o(e){var t=e.label,n=e.name,o=e.hint,l=e.storage,u=e.formats,d=e.max,b=e.required,m=e.externalErrorMessage,j=Object(s.d)(),f=j.register,O=j.errors,p=j.formState,h=p.touched,x=p.isSubmitted,v=j.setValue,g=j.watch;Object(r.useEffect)((function(){f({name:n})}),[f,n]);var C=i.a.errorMessage(n,O,h,x,m);return Object(a.jsxs)("div",{className:"form-group",children:[Boolean(t)&&Object(a.jsx)("label",{className:"col-form-label ".concat(b?"required":null),htmlFor:n,children:t}),Object(a.jsx)("br",{}),Object(a.jsx)(c.a,{storage:l,formats:u,value:g(n),onChange:function(t){v(n,t,{shouldValidate:!0}),e.onChange&&e.onChange(t)},max:d}),Object(a.jsx)("div",{className:"invalid-feedback",children:C}),Boolean(o)&&Object(a.jsx)("small",{className:"form-text text-muted",children:o})]})}o.defaultProps={max:void 0,required:!1},t.a=o},708:function(e,t,n){"use strict";var a=n(4),r=n(29),c=n(57),s=n(129),i=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.produitCategorieRead)})),o=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.produitCategorieEdit)})),l=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.produitCategorieCreate)})),u=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.produitCategorieImport)})),d={selectPermissionToRead:i,selectPermissionToEdit:o,selectPermissionToCreate:l,selectPermissionToDestroy:Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.produitCategorieDestroy)})),selectPermissionToImport:u};t.a=d},712:function(e,t,n){"use strict";var a=n(4),r=n(29),c=n(57),s=n(129),i=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.commandLineRead)})),o=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.commandLineEdit)})),l=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.commandLineCreate)})),u=Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.commandLineImport)})),d={selectPermissionToRead:i,selectPermissionToEdit:o,selectPermissionToCreate:l,selectPermissionToDestroy:Object(a.a)([r.a.selectCurrentTenant,r.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(s.a.values.commandLineDestroy)})),selectPermissionToImport:u};t.a=d},727:function(e,t,n){"use strict";var a=n(11),r=(n(5),n(606)),c=n(608);function s(e){var t=e.label,n=e.name,s=e.hint,i=e.size,o=e.placeholder,l=e.autoFocus,u=e.autoComplete,d=e.externalErrorMessage,b=e.required,m={small:"col-form-label-sm",large:"col-form-label-lg"}[i]||"",j={small:"form-control-sm",large:"form-control-lg"}[i]||"",f=Object(r.d)(),O=f.register,p=f.errors,h=f.formState,x=h.touched,v=h.isSubmitted,g=c.a.errorMessage(n,p,x,v,d);return Object(a.jsxs)("div",{className:"form-group",children:[Boolean(t)&&Object(a.jsx)("label",{className:"col-form-label ".concat(b?"required":null," ").concat(m),htmlFor:n,children:t}),Object(a.jsx)("textarea",{id:n,name:n,ref:O,onChange:function(t){e.onChange&&e.onChange(t.target.value)},onBlur:function(t){e.onBlur&&e.onBlur(t)},placeholder:o||void 0,autoFocus:l||void 0,autoComplete:u||void 0,className:"form-control ".concat(j," ").concat(g?"is-invalid":"")}),Object(a.jsx)("div",{className:"invalid-feedback",children:g}),Boolean(s)&&Object(a.jsx)("small",{className:"form-text text-muted",children:s})]})}s.defaultProps={required:!1},t.a=s},731:function(e,t,n){"use strict";var a=n(0),r=n(145),c=n(11),s=n(5),i=n(606),o=n(2),l=n(616),u=n(607),d=n(620),b=n(39),m=n(618),j=n(613),f=n(614),O=n(615),p=b.e().shape({titre:l.a.string(Object(o.c)("entities.produitCategorie.fields.titre"),{required:!0})});t.a=function(e){var t=Object(s.useState)((function(){return{titre:(e.record||{}).titre}})),n=Object(r.a)(t,1)[0],l=Object(i.c)({resolver:Object(m.yupResolver)(p),mode:"all",defaultValues:n}),b=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return Object(c.jsx)(d.a,{children:Object(c.jsx)(i.a,Object(a.a)(Object(a.a)({},l),{},{children:Object(c.jsxs)("form",{onSubmit:l.handleSubmit(b),children:[Object(c.jsx)(f.a,{style:{backgroundColor:"#f0f2f5",paddingBottom:"10px"},children:Object(c.jsx)(O.a,{sm:12,children:Object(c.jsx)(j.a,{name:"titre",label:Object(o.c)("entities.produitCategorie.fields.titre"),required:!0,autoFocus:!0})})}),Object(c.jsxs)("div",{className:"form-buttons",children:[Object(c.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:l.handleSubmit(b),children:[Object(c.jsx)(u.a,{loading:e.saveLoading,iconClass:"far fa-save"})," ",Object(o.c)("common.save")]}),Object(c.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(n).forEach((function(e){l.setValue(e,n[e])}))},children:[Object(c.jsx)("i",{className:"fas fa-undo"})," ",Object(o.c)("common.reset")]}),e.onCancel?Object(c.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[Object(c.jsx)("i",{className:"fas fa-times"})," ",Object(o.c)("common.cancel")]}):null]})]})}))})}},739:function(e,t,n){"use strict";var a=n(0),r=n(19),c=n(145),s=n(11),i=n(5),o=n(67),l=n(1),u=n.n(l),d=n(3),b=n(121),m=n.n(b),j=n(2),f=n(6),O=n(731);var p=function(e){var t=Object(i.useRef)(),n=Object(i.useState)(!1),a=Object(c.a)(n,2),r=a[0],l=a[1];Object(i.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);var b=function(){var n=Object(d.a)(u.a.mark((function n(a,r){var c,s,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,l(!0),n.next=4,o.a.create(r);case 4:return c=n.sent,s=c.id,n.next=8,o.a.find(s);case 8:i=n.sent,window.$(t.current).modal("hide"),e.onSuccess(i),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),f.a.handle(n.t0);case 16:return n.prev=16,l(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,13,16,19]])})));return function(e,t){return n.apply(this,arguments)}}();return m.a.createPortal(Object(s.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:Object(s.jsx)("div",{className:"modal-dialog modal-lg",children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsxs)("div",{className:"modal-header",children:[Object(s.jsx)("h5",{className:"modal-title",children:Object(j.c)("entities.produitCategorie.new.title")}),Object(s.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:Object(s.jsx)("span",{children:"\xd7"})})]}),Object(s.jsx)("div",{className:"modal-body",children:Object(s.jsx)(O.a,{saveLoading:r,onSubmit:b,onCancel:function(){window.$(t.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},h=n(624),x=n(606),v=n(35),g=n(708);t.a=function(e){var t=Object(x.d)(),n=t.setValue,l=t.getValues,u=Object(i.useState)(!1),d=Object(c.a)(u,2),b=d[0],m=d[1],j=Object(v.e)(g.a.selectPermissionToCreate),f=function(){m(!1)},O={toAutocomplete(e){if(!e)return null;var t=e.id,n=e.label;return e.titre&&(n=e.titre),{key:t,value:t,label:n}},toValue:e=>e?{id:e.value,label:e.label}:null};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(h.a,Object(a.a)(Object(a.a)({},e),{},{fetchFn:function(e,t){return o.a.listAutocomplete(e,t)},mapper:O,onOpenModal:function(){m(!0)},hasPermissionToCreate:j})),b&&Object(s.jsx)(p,{onClose:f,onSuccess:function(t){var a=e.name,c=e.mode;n(a,c&&"multiple"===c?[].concat(Object(r.a)(l()[a]||[]),[t]):t),f()}})]})}},745:function(e,t,n){"use strict";var a=n(0),r=n(145),c=n(11),s=n(5),i=n(606),o=n(2),l=n(616),u=n(607),d=n(620),b=n(39),m=n(618),j=n(613),f=n(727),O=n(654),p=n(746),h=n(265),x=n(682),v=n(739),g=n(627),C=n(614),y=n(615),N=b.e().shape({titre:l.a.string(Object(o.c)("entities.produit.fields.titre"),{required:!0}),category:l.a.relationToOne(Object(o.c)("entities.produitCategorie.name"),{required:!0}),description:l.a.string(Object(o.c)("entities.produit.fields.description"),{required:!0}),publish:l.a.boolean(Object(o.c)("entities.produit.fields.publish"),{}),prix:l.a.decimal(Object(o.c)("entities.produit.fields.prix"),{required:!0}),photos:l.a.images(Object(o.c)("entities.produit.fields.photos"),{required:!1,max:4}),stock:l.a.integer(Object(o.c)("entities.produit.fields.stock"),{min:0,required:!1}),stockable:l.a.boolean(Object(o.c)("entities.produit.fields.stock"),{})});t.a=function(e){var t=Object(s.useState)((function(){var t=e.record||{};return t.category?{titre:t.titre,description:t.description,category:t.category[0],publish:t.publish,prix:t.prix,photos:t.photos||[],stock:t.stock,stockable:t.stockable}:{titre:t.titre,description:t.description,category:t.category,publish:t.publish,prix:t.prix,photos:t.photos||[],stock:t.stock,stockable:t.stockable}})),n=Object(r.a)(t,1)[0];console.log(e.record);var l=Object(i.c)({resolver:Object(m.yupResolver)(N),mode:"all",defaultValues:n}),b=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return Object(c.jsx)(d.a,{children:Object(c.jsx)(i.a,Object(a.a)(Object(a.a)({},l),{},{children:Object(c.jsxs)("form",{onSubmit:l.handleSubmit(b),children:[Object(c.jsxs)(g.a,{children:[Object(c.jsxs)(C.a,{style:{backgroundColor:"#f0f2f5",paddingBottom:"10px"},children:[Object(c.jsx)(y.a,{sm:4,children:Object(c.jsx)(v.a,{name:"category",label:Object(o.c)("entities.produitCategorie.name"),required:!0,showCreate:!e.modal})}),Object(c.jsx)(y.a,{sm:4,children:Object(c.jsx)(j.a,{name:"titre",label:Object(o.c)("entities.produit.fields.titre"),required:!0,autoFocus:!0})}),Object(c.jsx)(y.a,{sm:4,children:Object(c.jsx)(f.a,{name:"description",label:Object(o.c)("entities.produit.fields.description"),required:!0})})]}),Object(c.jsxs)(C.a,{children:[Object(c.jsx)(y.a,{sm:4,children:Object(c.jsx)(j.a,{name:"prix",label:Object(o.c)("entities.produit.fields.prix"),required:!0})}),Object(c.jsx)(y.a,{sm:4,children:l.getValues().stockable?Object(c.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:Object(c.jsx)(O.a,{name:"stock",label:Object(o.c)("entities.produit.fields.stock"),required:!1})}):null}),Object(c.jsx)(y.a,{sm:2,children:Object(c.jsx)(p.a,{name:"publish",label:Object(o.c)("entities.produit.fields.publish")})}),Object(c.jsx)(y.a,{sm:2,children:Object(c.jsx)(p.a,{name:"stockable",label:Object(o.c)("entities.produit.fields.stockable")})})]}),Object(c.jsx)(C.a,{style:{backgroundColor:"#f0f2f5",paddingBottom:"10px"},children:Object(c.jsx)(y.a,{sm:12,children:Object(c.jsx)(x.a,{name:"photos",label:Object(o.c)("entities.produit.fields.photos"),required:!1,storage:h.a.values.produitPhotos,max:4})})})]}),Object(c.jsxs)("div",{className:"form-buttons",children:[Object(c.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:l.handleSubmit(b),children:[Object(c.jsx)(u.a,{loading:e.saveLoading,iconClass:"far fa-save"})," ",Object(o.c)("common.save")]}),Object(c.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(n).forEach((function(e){l.setValue(e,n[e])}))},children:[Object(c.jsx)("i",{className:"fas fa-undo"})," ",Object(o.c)("common.reset")]}),e.onCancel?Object(c.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[Object(c.jsx)("i",{className:"fas fa-times"})," ",Object(o.c)("common.cancel")]}):null]})]})}))})}},746:function(e,t,n){"use strict";var a=n(11),r=(n(5),n(606)),c=n(608);function s(e){var t=e.label,n=e.name,s=e.hint,i=e.required,o=e.externalErrorMessage,l=Object(r.d)(),u=l.register,d=l.errors,b=l.formState,m=b.touched,j=b.isSubmitted,f=c.a.errorMessage(n,d,m,j,o);return Object(a.jsxs)("div",{className:"form-group",children:[Boolean(t)&&Object(a.jsx)("label",{className:"col-form-label ".concat(i?"required":null),htmlFor:n,children:t}),Object(a.jsxs)("div",{className:"custom-control custom-switch",children:[Object(a.jsx)("input",{type:"checkbox",className:"custom-control-input",id:n,name:n,ref:u,onChange:function(t){e.onChange&&e.onChange(t.target.checked)},onBlur:function(t){e.onBlur&&e.onBlur(t)}}),Object(a.jsx)("label",{className:"custom-control-label",htmlFor:n,children:"\xa0"})]}),Object(a.jsx)("div",{className:"invalid-feedback",children:f}),Boolean(s)&&Object(a.jsx)("small",{className:"form-text text-muted",children:s})]})}s.defaultProps={},t.a=s},753:function(e,t,n){"use strict";var a=n(0),r=n(19),c=n(145),s=n(11),i=n(5),o=n(68),l=n(1),u=n.n(l),d=n(3),b=n(121),m=n.n(b),j=n(2),f=n(6),O=n(745);var p=function(e){var t=Object(i.useRef)(),n=Object(i.useState)(!1),a=Object(c.a)(n,2),r=a[0],l=a[1];Object(i.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);var b=function(){var n=Object(d.a)(u.a.mark((function n(a,r){var c,s,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,l(!0),n.next=4,o.a.create(r);case 4:return c=n.sent,s=c.id,n.next=8,o.a.find(s);case 8:i=n.sent,window.$(t.current).modal("hide"),e.onSuccess(i),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),f.a.handle(n.t0);case 16:return n.prev=16,l(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,13,16,19]])})));return function(e,t){return n.apply(this,arguments)}}();return m.a.createPortal(Object(s.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:Object(s.jsx)("div",{className:"modal-dialog modal-lg",children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsxs)("div",{className:"modal-header",children:[Object(s.jsx)("h5",{className:"modal-title",children:Object(j.c)("entities.produit.new.title")}),Object(s.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:Object(s.jsx)("span",{children:"\xd7"})})]}),Object(s.jsx)("div",{className:"modal-body",children:Object(s.jsx)(O.a,{saveLoading:r,onSubmit:b,onCancel:function(){window.$(t.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},h=n(624),x=n(606),v=n(35),g=n(691);t.a=function(e){var t=Object(x.d)(),n=t.setValue,l=t.getValues,u=Object(i.useState)(!1),d=Object(c.a)(u,2),b=d[0],m=d[1],j=Object(v.e)(g.a.selectPermissionToCreate),f=function(){m(!1)},O={toAutocomplete(e){if(!e)return null;var t=e.id,n=e.label,a=e.prix,r=e.stock,c=e.titre;return e.titre&&(n=e.titre,a=e.prix,r=e.stock,c=e.titre),{key:t,value:t,label:n,prix:a,stock:r,titre:c}},toValue:e=>e?{id:e.value,label:e.label,prix:e.prix,stock:e.stock,titre:e.titre}:null};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(h.a,Object(a.a)(Object(a.a)({},e),{},{fetchFn:function(e,t){return o.a.listAutocomplete(e,t)},mapper:O,onOpenModal:function(){m(!0)},hasPermissionToCreate:j})),b&&Object(s.jsx)(p,{onClose:f,onSuccess:function(t){var a=e.name,c=e.mode;n(a,c&&"multiple"===c?[].concat(Object(r.a)(l()[a]||[]),[t]):t),f()}})]})}},780:function(e,t,n){"use strict";var a=n(25),r=n(30),c=n(36),s=n.n(c),i=n(5),o=n.n(i),l=n(37),u=["bsPrefix","fluid","as","className"],d=o.a.forwardRef((function(e,t){var n=e.bsPrefix,c=e.fluid,i=e.as,d=void 0===i?"div":i,b=e.className,m=Object(r.a)(e,u),j=Object(l.a)(n,"container"),f="string"===typeof c?"-"+c:"-fluid";return o.a.createElement(d,Object(a.a)({ref:t},m,{className:s()(b,c?""+j+f:j)}))}));d.displayName="Container",d.defaultProps={fluid:!1},t.a=d},792:function(e,t,n){"use strict";var a=n(0),r=n(145),c=n(11),s=n(5),i=n(606),o=n(2),l=n(616),u=n(607),d=n(620),b=n(39),m=n(618),j=n(654),f=n(753),O=n(613),p=n(614),h=n(615),x=n(802),v=b.e().shape({product:l.a.relationToOne(Object(o.c)("entities.commandLine.fields.product"),{required:!0}),quantity:l.a.integer(Object(o.c)("entities.commandLine.fields.quantity"),{required:!0,min:1,max:undefined}),subTotal:l.a.integer(Object(o.c)("entities.commandLine.fields.subTotal"),{required:!0}),productTitle:l.a.string(Object(o.c)("entities.commandLine.fields.productTitle"),{required:!0})});t.a=function(e){var t=Object(s.useState)(!1),n=Object(r.a)(t,2),l=n[0],b=n[1],g=Object(s.useState)((function(){var t=e.record||{};return{product:t.product,quantity:t.quantity,subTotal:t.subTotal,productTitle:t.productTitle}})),C=Object(r.a)(g,1)[0],y=Object(i.c)({resolver:Object(m.yupResolver)(v),mode:"all",defaultValues:C}),N=function(t){var n;if(y.getValues().product&&y.getValues().product.stock)y.getValues().quantity<=y.getValues().product.stock?e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t):b(!0);else if(y.getValues().product&&!y.getValues().product.stock){var a;e.onSubmit(null===(a=e.record)||void 0===a?void 0:a.id,t)}else console.log("error")};return Object(c.jsx)(d.a,{children:Object(c.jsx)(i.a,Object(a.a)(Object(a.a)({},y),{},{children:Object(c.jsxs)("form",{onSubmit:y.handleSubmit(N),children:[y.getValues().product?Object(c.jsx)(p.a,{children:Object(c.jsx)(h.a,{sm:8,style:{display:"none"},children:Object(c.jsx)(O.a,{name:"productTitle",label:Object(o.c)("entities.produit.fields.titre"),defaultValue:y.getValues().product.titre})})}):null,Object(c.jsxs)(p.a,{children:[Object(c.jsx)(h.a,{sm:8,children:Object(c.jsx)(f.a,{name:"product",label:Object(o.c)("entities.commandLine.fields.product"),required:!0,showCreate:!e.modal})}),Object(c.jsx)(h.a,{sm:4,children:y.getValues().product?Object(c.jsx)(j.a,{name:y.getValues().product.prix,defaultValue:y.getValues().product.prix+"",label:Object(o.c)("entities.produit.fields.prix"),required:!0,disabled:!0}):null})]}),Object(c.jsxs)(p.a,{children:[y.getValues().product&&y.getValues().product.stock?Object(c.jsxs)(h.a,{sm:4,children:[Object(c.jsx)(j.a,{name:"quantity",label:Object(o.c)("entities.commandLine.fields.quantity"),required:!0,maxValue:y.getValues().product.stock,type:"number"}),l?Object(c.jsx)(x.a,{variant:"danger",onClose:function(){return b(!1)},dismissible:!0,children:Object(c.jsx)("p",{children:Object(o.c)("common.quantityError")})}):null]}):Object(c.jsx)(h.a,{sm:4,children:Object(c.jsx)(j.a,{name:"quantity",label:Object(o.c)("entities.commandLine.fields.quantity"),required:!0,type:"number"})}),y.getValues().product?Object(c.jsx)(h.a,{sm:4,children:y.getValues().product.stock?Object(c.jsx)(O.a,{name:"stock",label:Object(o.c)("entities.produit.fields.stock"),defaultValue:y.getValues().product.stock}):null}):null,Object(c.jsx)(h.a,{sm:4,children:y.getValues().product&&y.getValues().quantity?Object(c.jsx)(j.a,{name:"subTotal",defaultValue:y.getValues().product.prix*y.getValues().quantity+"",label:Object(o.c)("entities.commandLine.fields.subTotal"),required:!0}):null})]}),Object(c.jsxs)("div",{className:"form-buttons",children:[Object(c.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:y.handleSubmit(N),children:[Object(c.jsx)(u.a,{loading:e.saveLoading,iconClass:"far fa-save"})," ",Object(o.c)("common.save")]}),Object(c.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(C).forEach((function(e){y.setValue(e,C[e])}))},children:[Object(c.jsx)("i",{className:"fas fa-undo"})," ",Object(o.c)("common.reset")]}),e.onCancel?Object(c.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[Object(c.jsx)("i",{className:"fas fa-times"})," ",Object(o.c)("common.cancel")]}):null]})]})}))})}},852:function(e,t,n){"use strict";n.r(t);var a=n(145),r=n(11),c=n(5),s=n(35),i=n(32),o=n(2),l=n(119),u=n(4),d=function(e){return e.produitCommande.form},b=Object(u.a)([d],(function(e){return e.record})),m={selectInitLoading:Object(u.a)([d],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:Object(u.a)([d],(function(e){return Boolean(e.saveLoading)})),selectRecord:b,selectRaw:d},j=n(7),f=n(0),O=n(606),p=n(616),h=n(607),x=n(620),v=n(39),g=n(618),C=n(652),y=n(746),N=n(265),w=n(704),k=n(19),T=n(72),S=n(1),q=n.n(S),I=n(3),E=n(121),V=n.n(E),L=n(6),M=n(792);var B=function(e){var t=Object(c.useRef)(),n=Object(c.useState)(!1),s=Object(a.a)(n,2),i=s[0],l=s[1];Object(c.useEffect)((function(){window.$(t.current).modal("show"),window.$(t.current).on("hidden.bs.modal",e.onClose)}),[]);var u=function(){var n=Object(I.a)(q.a.mark((function n(a,r){var c,s,i;return q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,l(!0),n.next=4,T.a.create(r);case 4:return c=n.sent,s=c.id,n.next=8,T.a.find(s);case 8:i=n.sent,window.$(t.current).modal("hide"),e.onSuccess(i),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),L.a.handle(n.t0);case 16:return n.prev=16,l(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,13,16,19]])})));return function(e,t){return n.apply(this,arguments)}}();return V.a.createPortal(Object(r.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:Object(r.jsx)("div",{className:"modal-dialog modal-lg",children:Object(r.jsxs)("div",{className:"modal-content",children:[Object(r.jsxs)("div",{className:"modal-header",children:[Object(r.jsx)("h5",{className:"modal-title",children:Object(o.c)("entities.commandLine.new.title")}),Object(r.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:Object(r.jsx)("span",{children:"\xd7"})})]}),Object(r.jsx)("div",{className:"modal-body",children:Object(r.jsx)(M.a,{saveLoading:i,onSubmit:u,onCancel:function(){window.$(t.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},U=n(608),A=n(712),P=n(85),R=n(614),F=n(615),D=n(143),Y=n(780),_=n(373);function $(e){var t=Object(O.d)(),n=t.errors,i=t.watch,l=t.setValue,u=t.register,d=t.formState,b=d.touched,m=d.isSubmitted,j=(e.isEditing,e.commandId,e.label),f=e.name,p=e.hint,h=(e.placeholder,e.autoFocus,e.externalErrorMessage),x=(e.mode,e.required),v=(e.isClearable,e.mapper),g=e.fetchFn,C=i(f),y=Object(s.e)(A.a.selectPermissionToEdit),N=Object(s.e)(A.a.selectPermissionToDestroy),w=Object(c.useState)([]),k=Object(a.a)(w,2),T=k[0],S=k[1],E=Object(c.useState)(!1),V=Object(a.a)(E,2),L=V[0],M=V[1];Object(c.useEffect)((function(){u({name:f})}),[u,f]),Object(c.useEffect)((function(){(function(){var e=Object(I.a)(q.a.mark((function e(){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.prev=1,e.next=4,g();case 4:t=(t=e.sent).map((function(e){return v.toAutocomplete(e)})),S(t),M(!1),e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),S([]),M(!1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}})()().then((function(){}))}),[]);var B=function(e){return(T||[]).find((function(t){return t.value===e.value}))||e},$=function(t){if(!t)return l(f,[],{shouldValidate:!0}),void(e.onChange&&e.onChange([]));var n=t.map((function(e){return v.toValue(e)}));l(f,n,{shouldValidate:!0}),e.onChange&&e.onChange(n)},z=function(){return C?C.map((function(e){return B(v.toAutocomplete(e))})):[]},G=z(),H=function(){var e=Object(I.a)(q.a.mark((function e(t,n){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G.splice(t,1),$(G);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=L?Object(o.c)("autocomplete.loading"):p,W=U.a.errorMessage(f,n,b,m,h);Boolean(W);return Object(r.jsxs)(Y.a,{children:[Object(r.jsxs)(R.a,{style:{marginTop:"16px"},children:[Object(r.jsxs)(F.a,{sm:10,children:[Boolean(j)&&Object(r.jsx)("label",{className:"col-form-label ".concat(x?"required":null),htmlFor:f,children:j}),Object(r.jsx)(D.a.Divider,{})]}),Object(r.jsx)(F.a,{sm:2,children:e.showCreate&&e.hasPermissionToCreate?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(_.a,{style:{alignSelf:"end"},variant:"primary",onClick:e.onOpenModal,children:[Object(r.jsx)("i",{style:{marginRight:"5px"},className:"fas fa-plus"}),Object(o.c)("entities.commandLine.new.title")]})," "]}):null})]}),Object(r.jsxs)(R.a,{children:[Object(r.jsx)(F.a,{sm:4,children:Object(o.c)("entities.commandLine.fields.product")}),Object(r.jsx)(F.a,{sm:3,children:Object(o.c)("entities.commandLine.fields.quantity")}),Object(r.jsx)(F.a,{sm:3,children:Object(o.c)("entities.commandLine.fields.subTotal")}),Object(r.jsx)(F.a,{sm:2})]}),Object(r.jsx)(D.a.Divider,{}),G.map((function(t,n){return Object(r.jsxs)("div",{children:[Object(r.jsxs)(R.a,{children:[Object(r.jsx)(F.a,{sm:4,children:t.product.titre}),Object(r.jsx)(F.a,{sm:3,children:t.quantity}),Object(r.jsx)(F.a,{sm:3,children:t.subTotal}),e.isEditing?Object(r.jsx)(F.a,{sm:2,children:Object(r.jsxs)(r.Fragment,{children:[y&&Object(r.jsx)(P.a,{className:"btn btn-link",to:"/command-line/".concat(t.key,"/edit"),children:Object(o.c)("common.edit")}),N&&Object(r.jsx)("button",{className:"btn btn-link",type:"button",onClick:function(){return H(n,e.commandId)},children:Object(o.c)("common.destroy")})]})}):null]}),Object(r.jsx)(D.a.Divider,{})]})})),Object(r.jsx)("div",{className:"invalid-feedback",children:W}),Boolean(Q)&&Object(r.jsx)("small",{className:"form-text text-muted",children:Q})]})}$.defaultProps={isClearable:!0,mode:"default",required:!1};var z=$;var G=function(e){var t=Object(O.d)(),n=t.setValue,i=t.getValues,o=e.isEditing,l=e.commandId,u=Object(c.useState)(!1),d=Object(a.a)(u,2),b=d[0],m=d[1],j=Object(s.e)(A.a.selectPermissionToCreate),p=function(){m(!1)},h={toAutocomplete(e){if(!e)return null;var t=e.id,n=e.label,a=e.product,r=e.quantity,c=e.subTotal,s=e.producTitle;return e.id&&(n=e.id,a=e.product,r=e.quantity,c=e.subTotal,s=e.producTitle),{key:t,value:t,label:n,product:a,quantity:r,subTotal:c,producTitle:s}},toValue:e=>e?{id:e.value,label:e.label,product:e.product,quantity:e.quantity,subTotal:e.subTotal,producTitle:e.producTitle}:null};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(z,Object(f.a)(Object(f.a)({},e),{},{isEditing:o,commandId:l,fetchFn:function(e,t){return T.a.listAutocomplete(e,t)},mapper:h,onOpenModal:function(){m(!0)},hasPermissionToCreate:j})),b&&Object(r.jsx)(B,{onClose:p,onSuccess:function(t){var a=e.name,r=e.mode;n(a,r&&"multiple"===r?[].concat(Object(k.a)(i()[a]||[]),[t]):t),p()}})]})},H=n(654),Q=v.e().shape({adherent:p.a.relationToOne(Object(o.c)("entities.produitCommande.fields.adherent"),{required:!0}),attachements:p.a.files(Object(o.c)("entities.produitCommande.fields.attachements"),{}),delivered:p.a.boolean(Object(o.c)("entities.produitCommande.fields.delivered"),{}),commandLine:p.a.relationToMany(Object(o.c)("entities.produitCommande.fields.commandLine"),{required:!0}),total:p.a.integer(Object(o.c)("entities.produitCommande.fields.total"),{required:!0})});var W=function(e){var t=Object(c.useState)(0),n=Object(a.a)(t,2),s=n[0],i=n[1],l=Object(c.useState)((function(){var t=e.record||{};return{adherent:t.adherent,attachements:t.attachements||[],delivered:t.delivered,commandLine:t.commandLine||[],total:t.total}})),u=Object(a.a)(l,1)[0],d=Object(O.c)({resolver:Object(g.yupResolver)(Q),mode:"all",defaultValues:u}),b=0;Object(c.useEffect)((function(){d.getValues().commandLine.map((function(e){b+=e.subTotal})),i(b)}),[d.getValues().commandLine]),Object(c.useEffect)((function(){e.record.commandLine&&(e.record.commandLine.map((function(e){b+=e.subTotal})),i(b))}),[e.record.commandLine]);var m=function(t){var n;e.onSubmit(null===(n=e.record)||void 0===n?void 0:n.id,t)};return Object(r.jsx)(x.a,{children:Object(r.jsx)(O.a,Object(f.a)(Object(f.a)({},d),{},{children:Object(r.jsxs)("form",{onSubmit:d.handleSubmit(m),children:[Object(r.jsxs)(Y.a,{children:[Object(r.jsxs)(R.a,{children:[Object(r.jsx)(F.a,{sm:6,children:Object(r.jsx)(C.a,{name:"adherent",label:Object(o.c)("entities.produitCommande.fields.adherent"),required:!0,showCreate:!1})}),Object(r.jsx)(F.a,{sm:4,children:Object(r.jsx)(w.a,{name:"attachements",label:Object(o.c)("entities.produitCommande.fields.attachements"),required:!1,storage:N.a.values.produitCommandeAttachements,max:void 0,formats:void 0})}),Object(r.jsx)(F.a,{sm:2,children:Object(r.jsx)(y.a,{name:"delivered",label:Object(o.c)("entities.produitCommande.fields.delivered")})})]}),Object(r.jsx)(R.a,{children:Object(r.jsx)(F.a,{sm:12,children:Object(r.jsx)(G,{isEditing:e.isEditing,commandId:e.record.id,name:"commandLine",label:Object(o.c)("entities.produitCommande.fields.commandLine"),required:!0,showCreate:!e.modal,mode:"multiple"})})}),Object(r.jsxs)(R.a,{children:[Object(r.jsx)(F.a,{sm:8}),Object(r.jsx)(F.a,{sm:4,children:Object(r.jsx)(H.a,{name:"total",label:Object(o.c)("entities.produitCommande.fields.total"),defaultValue:s+""})})]})]}),Object(r.jsxs)("div",{className:"form-buttons",children:[Object(r.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:d.handleSubmit(m),children:[Object(r.jsx)(h.a,{loading:e.saveLoading,iconClass:"far fa-save"})," ",Object(o.c)("common.save")]}),Object(r.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(u).forEach((function(e){d.setValue(e,u[e])}))},children:[Object(r.jsx)("i",{className:"fas fa-undo"})," ",Object(o.c)("common.reset")]}),e.onCancel?Object(r.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[Object(r.jsx)("i",{className:"fas fa-times"})," ",Object(o.c)("common.cancel")]}):null]})]})}))})},J=n(609),Z=n(611),K=n(612),X=n(610);t.default=function(e){var t=Object(c.useState)(!1),n=Object(a.a)(t,2),u=n[0],d=n[1],b=Object(s.d)(),f=Object(i.h)(),O=Object(s.e)(m.selectInitLoading),p=Object(s.e)(m.selectSaveLoading),h=Object(s.e)(m.selectRecord),x=Boolean(f.params.id),v=x?Object(o.c)("entities.produitCommande.edit.title"):Object(o.c)("entities.produitCommande.new.title");return Object(c.useEffect)((function(){b(l.a.doInit(f.params.id)),d(!0)}),[b,f.params.id]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Z.a,{items:[[Object(o.c)("dashboard.menu"),"/"],[Object(o.c)("entities.produitCommande.menu"),"/produit-commande"],[v]]}),Object(r.jsxs)(J.a,{children:[Object(r.jsx)(X.a,{children:v}),O&&Object(r.jsx)(K.a,{}),u&&!O&&Object(r.jsx)(W,{saveLoading:p,initLoading:O,record:h,isEditing:x,onSubmit:function(e,t){b(x?l.a.doUpdate(e,t):l.a.doCreate(t))},onCancel:function(){return Object(j.b)().push("/produit-commande")}})]})]})}}}]);