(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[81],{611:function(e,t,n){"use strict";var a=n(127),c=n(11),r=(n(5),n(85));function o(){var e=Object(a.a)(["\n  .breadcrumb {\n    font-size: 13px;\n    margin: 0px;\n    padding: 0px;\n    background-color: transparent;\n  }\n\n  .breadcrumb-item:not(.active) a {\n    color: rgba(0, 0, 0, 0.45);\n  }\n"]);return o=function(){return e},e}var s=n(128).a.nav(o());t.a=function(e){var t=function(e){return e.length>1};return Object(c.jsx)(s,{children:Object(c.jsx)("ol",{className:"breadcrumb",children:e.items.map((function(n,a){return Object(c.jsx)("li",{className:"breadcrumb-item ".concat(e.items.length-1===a?"active":""),children:t(n)?Object(c.jsx)(r.a,{to:n[1],children:n[0]}):n[0]},n[0])}))})})}},621:function(e,t,n){"use strict";var a=n(127);function c(){var e=Object(a.a)(["\n  margin-bottom: 8px;\n\n  .btn {\n    margin-right: 8px;\n    margin-bottom: 8px;\n  }\n"]);return c=function(){return e},e}var r=n(128).a.div(c());t.a=r},622:function(e,t,n){"use strict";var a=n(4),c=n(29),r=n(57),o=n(129),s=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(o.a.values.userRead)})),i=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(o.a.values.userEdit)})),l=Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(o.a.values.userDestroy)})),u={selectPermissionToRead:s,selectPermissionToEdit:i,selectPermissionToCreate:Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(o.a.values.userCreate)})),selectPermissionToImport:Object(a.a)([c.a.selectCurrentTenant,c.a.selectCurrentUser],(function(e,t){return new r.a(e,t).match(o.a.values.userImport)})),selectPermissionToDestroy:l};t.a=u},680:function(e,t,n){"use strict";var a=n(11),c=(n(5),n(85)),r=n(35),o=n(622);t.a=function(e){var t=Object(r.e)(o.a.selectPermissionToRead),n=function(){var t=e.value;return t?Array.isArray(t)?t:[t]:[]},s=function(e){return e?e.fullName?"".concat(e.fullName," <").concat(e.email,">"):e.email:null};return n().length?Object(a.jsx)(a.Fragment,{children:n().map((function(e){return n=e,t?Object(a.jsx)("div",{children:Object(a.jsx)(c.a,{className:"btn btn-link",to:"/user/".concat(n.id),children:s(n)})},n.id):Object(a.jsx)("div",{children:s(n)},n.id);var n}))}):null}},777:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(5),o=i(r),s=i(n(20));function i(e){return e&&e.__esModule?e:{default:e}}var l={overflow:"hidden",position:"relative"},u={position:"relative",overflow:"hidden",cursor:"pointer",display:"block",float:"left"},d=function(e,t){return"\n    .react-stars-"+t+":before {\n      position: absolute;\n      overflow: hidden;\n      display: block;\n      z-index: 1;\n      top: 0; left: 0;\n      width: 50%;\n      content: attr(data-forhalf);\n      color: "+e+";\n  }"},b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e=a({},e),n.state={uniqueness:(Math.random()+"").replace(".",""),value:e.value||0,stars:[],halfStar:{at:Math.floor(e.value),hidden:e.half&&e.value%1<.5}},n.state.config={count:e.count,size:e.size,char:e.char,color1:e.color1,color2:e.color2,half:e.half,edit:e.edit},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"componentDidMount",value:function(){this.setState({stars:this.getStars(this.state.value)})}},{key:"componentWillReceiveProps",value:function(e){this.setState({stars:this.getStars(e.value),value:e.value,halfStar:{at:Math.floor(e.value),hidden:this.state.config.half&&e.value%1<.5}})}},{key:"isDecimal",value:function(e){return e%1!==0}},{key:"getRate",value:function(){return this.state.config.half?Math.floor(this.state.value):Math.round(this.state.value)}},{key:"getStars",value:function(e){"undefined"===typeof e&&(e=this.getRate());for(var t=[],n=0;n<this.state.config.count;n++)t.push({active:n<=e-1});return t}},{key:"mouseOver",value:function(e){var t=this.state,n=t.config,a=t.halfStar;if(n.edit){var c=Number(e.target.getAttribute("data-index"));if(n.half){var r=this.moreThanHalf(e,n.size);a.hidden=r,r&&(c+=1),a.at=c}else c+=1;this.setState({stars:this.getStars(c)})}}},{key:"moreThanHalf",value:function(e,t){var n=e.target,a=e.clientX-n.getBoundingClientRect().left;return(a=Math.round(Math.abs(a)))>t/2}},{key:"mouseLeave",value:function(){var e=this.state,t=e.value,n=e.halfStar,a=e.config;a.edit&&(a.half&&(n.hidden=!this.isDecimal(t),n.at=Math.floor(this.state.value)),this.setState({stars:this.getStars()}))}},{key:"clicked",value:function(e){var t=this.state,n=t.config,a=t.halfStar;if(n.edit){var c=Number(e.target.getAttribute("data-index")),r=void 0;if(n.half){var o=this.moreThanHalf(e,n.size);a.hidden=o,o&&(c+=1),r=o?c:c+.5,a.at=c}else r=c+=1;this.setState({value:r,stars:this.getStars(c)}),this.props.onChange(r)}}},{key:"renderHalfStarStyleElement",value:function(){var e=this.state,t=e.config,n=e.uniqueness;return o.default.createElement("style",{dangerouslySetInnerHTML:{__html:d(t.color2,n)}})}},{key:"renderStars",value:function(){var e=this,t=this.state,n=t.halfStar,c=t.stars,r=t.uniqueness,s=t.config,i=s.color1,l=s.color2,d=s.size,b=s.char,j=s.half,f=s.edit;return c.map((function(t,c){var s="";j&&!n.hidden&&n.at===c&&(s="react-stars-"+r);var h=a({},u,{color:t.active?l:i,cursor:f?"pointer":"default",fontSize:d+"px"});return o.default.createElement("span",{className:s,style:h,key:c,"data-index":c,"data-forhalf":b,onMouseOver:e.mouseOver.bind(e),onMouseMove:e.mouseOver.bind(e),onMouseLeave:e.mouseLeave.bind(e),onClick:e.clicked.bind(e)},b)}))}},{key:"render",value:function(){var e=this.props.className;return o.default.createElement("div",{className:e,style:l},this.state.config.half?this.renderHalfStarStyleElement():"",this.renderStars())}}]),t}(r.Component);b.propTypes={className:s.default.string,edit:s.default.bool,half:s.default.bool,value:s.default.number,count:s.default.number,char:s.default.string,size:s.default.number,color1:s.default.string,color2:s.default.string},b.defaultProps={edit:!0,half:!0,value:0,count:5,char:"\u2605",size:15,color1:"gray",color2:"#ffd700",onChange:function(){}},t.default=b},791:function(e,t,n){"use strict";var a=n(145),c=n(11),r=n(5),o=n(35),s=n(777),i=n.n(s),l=n(85),u=n(2),d=n(736),b=n(149),j=n(737),f=n(42),h=n(89),m=n(630),O=n(617),v=n(612),p=n(629),x=n(631),g=n(680);t.a=function(e){var t=Object(r.useState)(null),n=Object(a.a)(t,2),s=n[0],y=n[1],k=Object(o.d)(),S=Object(o.e)(h.a.selectLoading),C=Object(o.e)(j.a.selectLoading),N=S||C,T=Object(o.e)(h.a.selectRows),w=Object(o.e)(h.a.selectPagination),P=Object(o.e)(h.a.selectSelectedKeys),M=Object(o.e)(h.a.selectHasRows),E=Object(o.e)(h.a.selectSorter),R=Object(o.e)(h.a.selectIsAllSelected),_=Object(o.e)(d.a.selectPermissionToEdit),z=Object(o.e)(d.a.selectPermissionToDestroy),D=function(){y(null)};return Object(c.jsxs)(p.a,{children:[Object(c.jsx)("div",{className:"table-responsive",children:Object(c.jsxs)("table",{className:"table table-striped     mt-2",children:[Object(c.jsx)("thead",{className:"thead",children:Object(c.jsxs)("tr",{children:[Object(c.jsx)(m.a,{className:"th-checkbox",children:M&&Object(c.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(c.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"table-header-checkbox",checked:Boolean(R),onChange:function(){k(f.a.doToggleAllSelected())}}),Object(c.jsx)("label",{htmlFor:"table-header-checkbox",className:"custom-control-label",children:"\xa0"})]})}),Object(c.jsx)(m.a,{label:Object(u.c)("entities.votes.fields.adherent")}),Object(c.jsx)(m.a,{onSort:function(e){var t=E.field===e&&"ascend"===E.order?"descend":"ascend";k(f.a.doChangeSort({field:e,order:t}))},hasRows:M,sorter:E,name:"votes",label:Object(u.c)("entities.votes.fields.votes"),align:"left"}),Object(c.jsx)(m.a,{className:"th-actions"})]})}),Object(c.jsxs)("tbody",{children:[N&&Object(c.jsx)("tr",{children:Object(c.jsx)("td",{colSpan:100,children:Object(c.jsx)(v.a,{})})}),!N&&!M&&Object(c.jsx)("tr",{children:Object(c.jsx)("td",{colSpan:100,children:Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(u.c)("table.noData")})})}),!N&&T.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{className:"th-checkbox",scope:"row",children:Object(c.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(c.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"table-header-checkbox-".concat(e.id),checked:P.includes(e.id),onChange:function(){return t=e.id,void k(f.a.doToggleOneSelected(t));var t}}),Object(c.jsx)("label",{htmlFor:"table-header-checkbox-".concat(e.id),className:"custom-control-label",children:"\xa0"})]})}),Object(c.jsx)("td",{children:Object(c.jsx)(g.a,{value:e.adherent})}),Object(c.jsx)("td",{style:{textAlign:"right"},children:Object(c.jsx)(i.a,{count:5,size:28,edit:!1,value:e.votes,activeColor:"#ffd700"})}),Object(c.jsxs)("td",{className:"td-actions",children:[Object(c.jsx)(l.a,{className:"btn btn-link",to:"/votes/".concat(e.id),children:Object(u.c)("common.view")}),_&&Object(c.jsx)(l.a,{className:"btn btn-link",to:"/votes/".concat(e.id,"/edit"),children:Object(u.c)("common.edit")}),z&&Object(c.jsx)("button",{className:"btn btn-link",type:"button",onClick:function(){return t=e.id,void y(t);var t},children:Object(u.c)("common.destroy")})]})]},e.id)}))]})]})}),Object(c.jsx)(x.a,{onChange:function(e){k(f.a.doChangePagination(e))},disabled:N,pagination:w}),s&&Object(c.jsx)(O.a,{title:Object(u.c)("common.areYouSure"),onConfirm:function(){return e=s,D(),void k(b.a.doDestroy(e));var e},onClose:function(){return D()},okText:Object(u.c)("common.yes"),cancelText:Object(u.c)("common.no")})]})}},896:function(e,t,n){"use strict";n.r(t);var a=n(11),c=n(5),r=n(2),o=n(766),s=n(791),i=n(145),l=n(84),u=n(736),d=n(149),b=n(737),j=n(42),f=n(89),h=n(35),m=n(85),O=n(617),v=n(607),p=n(621),x=n(692);var g=function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),o=n[0],s=n[1],g=Object(h.d)(),y=Object(h.e)(f.a.selectSelectedKeys),k=Object(h.e)(f.a.selectLoading),S=Object(h.e)(b.a.selectLoading),C=Object(h.e)(f.a.selectExportLoading),N=Object(h.e)(f.a.selectHasRows),T=Object(h.e)(l.a.selectPermissionToRead),w=Object(h.e)(u.a.selectPermissionToDestroy),P=Object(h.e)(u.a.selectPermissionToCreate),M=Object(h.e)(u.a.selectPermissionToImport),E=function(){s(!0)},R=function(){s(!1)},_=function(){g(j.a.doExport())};return Object(a.jsxs)(p.a,{children:[P&&Object(a.jsx)(m.a,{to:"/votes/new",children:Object(a.jsxs)("button",{className:"btn btn-primary",type:"button",children:[Object(a.jsx)(v.a,{iconClass:"fas fa-plus"})," ",Object(r.c)("common.new")]})}),M&&Object(a.jsx)(m.a,{to:"/votes/importer",children:Object(a.jsxs)("button",{className:"btn btn-primary",type:"button",children:[Object(a.jsx)(v.a,{iconClass:"fas fa-upload"})," ",Object(r.c)("common.import")]})}),function(){if(!w)return null;var e=!y.length||k,t=Object(a.jsxs)("button",{disabled:e,className:"btn btn-primary",type:"button",onClick:E,children:[Object(a.jsx)(v.a,{loading:S,iconClass:"far fa-trash-alt"})," ",Object(r.c)("common.destroy")]});return e?Object(a.jsxs)("span",{"data-tip":Object(r.c)("common.mustSelectARow"),"data-tip-disable":!e,"data-for":"votes-list-toolbar-destroy-tooltip",children:[t,Object(a.jsx)(x.a,{id:"votes-list-toolbar-destroy-tooltip"})]}):t}(),T&&Object(a.jsx)(m.a,{to:"/audit-logs?entityNames=votes",children:Object(a.jsxs)("button",{className:"btn btn-light",type:"button",children:[Object(a.jsx)(v.a,{iconClass:"fas fa-history"})," ",Object(r.c)("auditLog.menu")]})}),function(){var e=!N||k,t=Object(a.jsxs)("button",{className:"btn btn-light",disabled:e,onClick:_,type:"button",children:[Object(a.jsx)(v.a,{loading:C,iconClass:"far fa-file-excel"})," ",Object(r.c)("common.export")]});return e?Object(a.jsxs)("span",{"data-tip":Object(r.c)("common.noDataToExport"),"data-tip-disable":!e,"data-for":"votes-list-toolbar-export-tooltip",children:[t,Object(a.jsx)(x.a,{id:"votes-list-toolbar-export-tooltip"})]}):t}(),o&&Object(a.jsx)(O.a,{title:Object(r.c)("common.areYouSure"),onConfirm:function(){return R(),void g(d.a.doDestroyAll(y))},onClose:function(){return R()},okText:Object(r.c)("common.yes"),cancelText:Object(r.c)("common.no")})]})},y=n(609),k=n(611),S=n(610),C=n(701);t.default=function(e){var t=Object(h.e)(C.a.selectUser);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(k.a,{items:[[Object(r.c)("dashboard.menu"),"/"],[Object(r.c)("entities.votes.menu")]]}),Object(a.jsxs)(y.a,{children:[Object(a.jsx)(S.a,{children:Object(r.c)("entities.votes.list.title")}),Object(a.jsx)(g,{}),Object(a.jsx)(o.a,{user:t}),Object(a.jsx)(s.a,{})]})]})}}}]);