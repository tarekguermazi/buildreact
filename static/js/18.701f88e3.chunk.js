(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[18],{609:function(e,t,n){"use strict";var r=n(127);function o(){var e=Object(r.a)(["\n  margin-top: 16px;\n  padding: 24px;\n  background-color: white;\n  width: 100%;\n  border-radius: 5px;\n  border: 1px solid #dee2e6 !important;\n"]);return o=function(){return e},e}var c=n(128).a.div(o());t.a=c},610:function(e,t,n){"use strict";var r=n(127);function o(){var e=Object(r.a)(["\n  margin-bottom: 24px;\n"]);return o=function(){return e},e}var c=n(128).a.h1(o());t.a=c},611:function(e,t,n){"use strict";var r=n(127),o=n(11),c=(n(5),n(85));function i(){var e=Object(r.a)(["\n  .breadcrumb {\n    font-size: 13px;\n    margin: 0px;\n    padding: 0px;\n    background-color: transparent;\n  }\n\n  .breadcrumb-item:not(.active) a {\n    color: rgba(0, 0, 0, 0.45);\n  }\n"]);return i=function(){return e},e}var a=n(128).a.nav(i());t.a=function(e){var t=function(e){return e.length>1};return Object(o.jsx)(a,{children:Object(o.jsx)("ol",{className:"breadcrumb",children:e.items.map((function(n,r){return Object(o.jsx)("li",{className:"breadcrumb-item ".concat(e.items.length-1===r?"active":""),children:t(n)?Object(o.jsx)(c.a,{to:n[1],children:n[0]}):n[0]},n[0])}))})})}},612:function(e,t,n){"use strict";var r=n(11);n(5);t.a=function(){return Object(r.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:Object(r.jsx)("div",{className:"spinner-border text-primary"})})}},632:function(e,t,n){var r=n(389),o=n(633),c=n(638),i=n(390),a=n(639),u=n(388);e.exports=function(e,t,n){var s=-1,l=o,f=e.length,b=!0,d=[],j=d;if(n)b=!1,l=c;else if(f>=200){var p=t?null:a(e);if(p)return u(p);b=!1,l=i,j=new r}else j=t?[]:d;e:for(;++s<f;){var O=e[s],v=t?t(O):O;if(O=n||0!==O?O:0,b&&v===v){for(var m=j.length;m--;)if(j[m]===v)continue e;t&&j.push(v),d.push(O)}else l(j,v,n)||(j!==d&&j.push(v),d.push(O))}return d}},633:function(e,t,n){var r=n(634);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},634:function(e,t,n){var r=n(635),o=n(636),c=n(637);e.exports=function(e,t,n){return t===t?c(e,t,n):r(e,o,n)}},635:function(e,t){e.exports=function(e,t,n,r){for(var o=e.length,c=n+(r?1:-1);r?c--:++c<o;)if(t(e[c],c,e))return c;return-1}},636:function(e,t){e.exports=function(e){return e!==e}},637:function(e,t){e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},638:function(e,t){e.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},639:function(e,t,n){var r=n(391),o=n(640),c=n(388),i=r&&1/c(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=i},640:function(e,t){e.exports=function(){}},646:function(e,t,n){var r=n(263),o=n(632);e.exports=function(e,t){return e&&e.length?o(e,r(t,2)):[]}},648:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},649:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return o}))},650:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(656),o=n(657);function c(e,t){return!t||"object"!==Object(r.a)(t)&&"function"!==typeof t?Object(o.a)(e):t}},651:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},652:function(e,t,n){"use strict";var r=n(0),o=n(19),c=n(145),i=n(11),a=n(5),u=n(80),s=n(647),l=n(624),f=n(606),b=n(35),d=n(622);t.a=function(e){var t=Object(f.d)(),n=t.setValue,j=t.getValues,p=Object(a.useState)(!1),O=Object(c.a)(p,2),v=O[0],m=O[1],h=Object(b.e)(d.a.selectPermissionToCreate),x={toAutocomplete(e){if(!e)return null;if(e.fullName||e.email){var t=e.email;return e.fullName&&(t="".concat(e.fullName," <").concat(e.email,">")),{value:e.id,label:t}}return{value:e.id,label:e.label}},toValue:e=>e?{id:e.value,label:e.label}:null};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(l.a,Object(r.a)(Object(r.a)({},e),{},{fetchFn:function(e,t){return u.a.fetchUserAutocomplete(e,t)},mapper:x,onOpenModal:function(){return m(!0)},hasPermissionToCreate:h})),v&&Object(i.jsx)(s.a,{visible:v,onClose:function(){return m(!1)},onSuccess:function(t){var r=e.name,c=e.mode;n(r,c&&"multiple"===c?[].concat(Object(o.a)(j()[r]||[]),[t]):t),m(!1)}})]})}},653:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return o}))},656:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return r}))},657:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},677:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},789:function(e,t,n){"use strict";var r=n(0),o=n(145),c=n(11),i=n(5),a=n(606),u=n(2),s=n(616),l=n(607),f=n(620),b=n(613),d=n(39),j=n(618),p=n(654),O=n(652),v=n(614),m=n(615),h=d.e().shape({adherent:s.a.relationToOne(Object(u.c)("entities.votes.fields.adherent"),{required:!0}),votes:s.a.integer(Object(u.c)("entities.votes.fields.votes"),{max:5,required:!0})});t.a=function(e){var t=Object(i.useState)((function(){var t=e.record||{};return{adherent:t.adherent,votes:t.votes,projet:e.recordIdprojet,titre:e.recordIdtitre}})),n=Object(o.a)(t,1)[0],s=Object(a.c)({resolver:Object(j.yupResolver)(h),mode:"all",defaultValues:n}),d=function(t){var n,r,o,c;e.isEditing?(t.projet=null===(n=e.record)||void 0===n?void 0:n.projet,t.titre=null===(r=e.record)||void 0===r?void 0:r.titre,e.onSubmit(null===(o=e.record)||void 0===o?void 0:o.id,t)):e.onSubmit(null===(c=e.record)||void 0===c?void 0:c.id,t)};return Object(c.jsx)(f.a,{children:Object(c.jsx)(a.a,Object(r.a)(Object(r.a)({},s),{},{children:Object(c.jsxs)("form",{onSubmit:s.handleSubmit(d),children:[Object(c.jsxs)(v.a,{style:{backgroundColor:"#f0f2f5",paddingBottom:"10px"},children:[Object(c.jsx)(m.a,{sm:8,children:Object(c.jsx)(O.a,{name:"adherent",label:Object(u.c)("entities.votes.fields.adherent"),required:!0,showCreate:!1})}),Object(c.jsx)(m.a,{sm:4,children:Object(c.jsx)(p.a,{name:"votes",label:Object(u.c)("entities.votes.fields.votes"),required:!0})})]}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{style:{display:"none"},children:Object(c.jsx)(b.a,{name:"projet"})}),Object(c.jsx)("div",{style:{display:"none"},children:Object(c.jsx)(b.a,{name:"titre"})})]}),Object(c.jsxs)("div",{className:"form-buttons",children:[Object(c.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:s.handleSubmit(d),children:[Object(c.jsx)(l.a,{loading:e.saveLoading,iconClass:"far fa-save"})," ",Object(u.c)("common.save")]}),Object(c.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(n).forEach((function(e){s.setValue(e,n[e])}))},children:[Object(c.jsx)("i",{className:"fas fa-undo"})," ",Object(u.c)("common.reset")]}),e.onCancel?Object(c.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[Object(c.jsx)("i",{className:"fas fa-times"})," ",Object(u.c)("common.cancel")]}):null]})]})}))})}},897:function(e,t,n){"use strict";n.r(t);var r=n(145),o=n(11),c=n(5),i=n(35),a=n(32),u=n(2),s=n(115),l=n(4),f=function(e){return e.votes.form},b=Object(l.a)([f],(function(e){return e.record})),d={selectInitLoading:Object(l.a)([f],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:Object(l.a)([f],(function(e){return Boolean(e.saveLoading)})),selectRecord:b,selectRaw:f},j=n(7),p=n(789),O=n(609),v=n(611),m=n(612),h=n(610);t.default=function(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),l=n[0],f=n[1],b=Object(i.d)(),x=Object(a.h)(),g=Object(i.e)(d.selectInitLoading),y=Object(i.e)(d.selectSaveLoading),w=Object(i.e)(d.selectRecord),S=Boolean(x.params.id),C=S?Object(u.c)("entities.votes.edit.title"):Object(u.c)("entities.votes.new.title");return Object(c.useEffect)((function(){b(s.a.doInit(x.params.id)),f(!0)}),[b,x.params.id]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(v.a,{items:[[Object(u.c)("dashboard.menu"),"/"],[Object(u.c)("entities.votes.menu")],[C]]}),Object(o.jsxs)(O.a,{children:[Object(o.jsx)(h.a,{children:C}),g&&Object(o.jsx)(m.a,{}),l&&!g&&Object(o.jsx)(p.a,{saveLoading:y,initLoading:g,record:w,isEditing:S,onSubmit:function(e,t){b(S?s.a.doUpdate(e,t):s.a.doCreate(t))},onCancel:function(){return Object(j.b)().push("/votes")}})]})]})}}}]);