(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[19],{607:function(e,n,t){"use strict";var r=t(11);t(5);n.a=function(e){return e.loading?Object(r.jsx)("span",{className:"spinner-border spinner-border-sm"}):e.iconClass?Object(r.jsx)("i",{className:e.iconClass}):null}},608:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var r=t(15),a=t(16),i=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"errorMessage",value:function(e,n,t,r){var a,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(i)return i;if(!r&&!t[e])return null;var o=n[e];return(null===o||void 0===o||null===(a=o[0])||void 0===a?void 0:a.message)||(null===o||void 0===o?void 0:o.message)||o||null}}]),e}()},609:function(e,n,t){"use strict";var r=t(127);function a(){var e=Object(r.a)(["\n  margin-top: 16px;\n  padding: 24px;\n  background-color: white;\n  width: 100%;\n  border-radius: 5px;\n  border: 1px solid #dee2e6 !important;\n"]);return a=function(){return e},e}var i=t(128).a.div(a());n.a=i},610:function(e,n,t){"use strict";var r=t(127);function a(){var e=Object(r.a)(["\n  margin-bottom: 24px;\n"]);return a=function(){return e},e}var i=t(128).a.h1(a());n.a=i},611:function(e,n,t){"use strict";var r=t(127),a=t(11),i=(t(5),t(85));function o(){var e=Object(r.a)(["\n  .breadcrumb {\n    font-size: 13px;\n    margin: 0px;\n    padding: 0px;\n    background-color: transparent;\n  }\n\n  .breadcrumb-item:not(.active) a {\n    color: rgba(0, 0, 0, 0.45);\n  }\n"]);return o=function(){return e},e}var c=t(128).a.nav(o());n.a=function(e){var n=function(e){return e.length>1};return Object(a.jsx)(c,{children:Object(a.jsx)("ol",{className:"breadcrumb",children:e.items.map((function(t,r){return Object(a.jsx)("li",{className:"breadcrumb-item ".concat(e.items.length-1===r?"active":""),children:n(t)?Object(a.jsx)(i.a,{to:t[1],children:t[0]}):t[0]},t[0])}))})})}},612:function(e,n,t){"use strict";var r=t(11);t(5);n.a=function(){return Object(r.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:Object(r.jsx)("div",{className:"spinner-border text-primary"})})}},613:function(e,n,t){"use strict";var r=t(11),a=(t(5),t(606)),i=t(608);function o(e){var n=e.defaultValue,t=e.label,o=e.name,c=e.hint,l=e.type,u=e.placeholder,s=e.autoFocus,d=e.autoComplete,m=e.required,b=e.externalErrorMessage,f=e.disabled,j=e.endAdornment,p=Object(a.d)(),O=p.register,h=p.errors,v=p.formState,g=v.touched,x=v.isSubmitted,y=i.a.errorMessage(o,h,g,x,b);return Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsxs)("div",{className:j?"input-group":"",children:[Boolean(t)&&Object(r.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:o,children:t}),Object(r.jsx)("input",{value:n,id:o,name:o,type:l,ref:O,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:u||void 0,autoFocus:s||void 0,autoComplete:d||void 0,disabled:f,className:"form-control ".concat(y?"is-invalid":"")}),j&&Object(r.jsx)("div",{className:"input-group-append",children:Object(r.jsx)("span",{className:"input-group-text",children:j})})]}),Object(r.jsx)("div",{className:"invalid-feedback",children:y}),Boolean(c)&&Object(r.jsx)("small",{className:"form-text text-muted",children:c})]})}o.defaultProps={type:"text",required:!1},n.a=o},616:function(e,n,t){"use strict";var r=t(19),a=t(39),i=t(2),o=t(55),c=t.n(o),l={generic:e=>a.c().label(e),string(e,n){n=n||{};var t=a.h().transform((function(e,n){return""===n?null:e})).nullable(!0).trim().label(e);return n.required&&(t=t.required()),(n.min||0===n.min)&&(t=t.min(n.min)),n.max&&(t=t.max(n.max)),n.matches&&(t=t.matches(n.matches)),t},boolean:(e,n)=>a.b().default(!1).label(e),relationToOne(e,n){n=n||{};var t=a.c().nullable(!0).label(e).transform((function(e,n){return n?n.id:null}));return n.required&&(t=t.required()),t},stringArray(e,n){n=n||{};var t=a.a().compact().ensure().of(a.h().transform((function(e,n){return""===n?null:e})).trim()).label(e);return(n.required||n.min)&&(t=t.required()),n.min||0===n.min?t=t.min(n.min):n.required&&(t=t.min(1)),n.max&&(t=t.max(n.max)),t},relationToMany(e,n){n=n||{};var t=a.a().nullable(!0).label(e).transform((function(e,n){return n&&n.length?n.map((function(e){return e.id})):[]}));return(n.required||n.min)&&(t=t.required()),n.min||0===n.min?t=t.min(n.min):n.required&&(t=t.min(1)),n.max&&(t=t.max(n.max)),t},integer(e,n){n=n||{};var t=a.d().transform((function(e,n){return""===n?null:e})).integer().nullable(!0).label(e);return n.required&&(t=t.required()),(n.min||0===n.min)&&(t=t.min(n.min)),n.max&&(t=t.max(n.max)),t},images(e,n){n=n||{};var t=a.a().nullable(!0).label(e);return(n.required||n.min)&&(t=t.required()),n.min||0===n.min?t=t.min(n.min):n.required&&(t=t.min(1)),n.max&&(t=t.max(n.max)),t},files(e,n){n=n||{};var t=a.a().compact().ensure().nullable(!0).label(e);return(n.required||n.min)&&(t=t.required()),n.min||0===n.min?t=t.min(n.min):n.required&&(t=t.min(1)),n.max&&(t=t.max(n.max)),t},enumerator(e,n){n=n||{};var t=a.h().transform((function(e,n){return""===n?null:e})).label(e).nullable(!0).oneOf([null].concat(Object(r.a)(n.options||[])));return n.required&&(t=t.required(Object(i.c)("validation.string.selected"))),t},email(e,n){n=n||{};var t=a.h().transform((function(e,n){return""===n?null:e})).nullable(!0).trim().label(e).email();return n.required&&(t=t.required()),(n.min||0===n.min)&&(t=t.min(n.min)),n.max&&(t=t.max(n.max)),n.matches&&(t=t.matches(n.matches)),t},decimal(e,n){n=n||{};var t=a.d().transform((function(e,n){return""===n?null:e})).nullable(!0).label(e);return n.required&&(t=t.required()),(n.min||0===n.min)&&(t=t.min(n.min)),n.max&&(t=t.max(n.max)),t},datetime(e,n){n=n||{};var t=a.c().nullable(!0).label(e).transform((function(e,n){return e?c()(n,"YYYY-MM-DD HH:mm").toISOString():null}));return n.required&&(t=t.required()),t},date(e,n){n=n||{};var t=a.c().nullable(!0).label(e).test("is-date",Object(i.c)("validation.mixed.default"),(function(e){return!e||c()(e,"YYYY-MM-DD").isValid()})).transform((function(e){return e?c()(e).format("YYYY-MM-DD"):null}));return n.required&&(t=t.required()),t}};n.a=l},620:function(e,n,t){"use strict";var r=t(127);function a(){var e=Object(r.a)(["\n  padding-top: 0;\n  padding-bottom: 0;\n\n  label.required::before {\n    display: inline-block;\n    margin-right: 4px;\n    content: '*';\n    line-height: 1;\n    font-size: 13px;\n    color: #f5222d;\n  }\n\n  .react-datepicker-wrapper {\n    width: 100%;\n  }\n\n  .react-datepicker-popper{\n    margin-top: 50px !important;\n  }\n\n  .custom-control {\n    z-index: 0;\n  }\n\n  .invalid-feedback {\n    display: block;\n  }\n\n  .form-buttons {\n    padding-top: 16px;\n\n    .btn {\n      margin-right: 8px;\n      margin-bottom: 8px;\n    }\n  }\n"]);return a=function(){return e},e}var i=t(128).a.div(a());n.a=i},626:function(e,n,t){"use strict";var r=t(0),a=t(11),i=t(5),o=t(628),c=t(2),l=t(606),u=t(608);function s(e){var n=e.label,t=e.name,s=e.hint,d=e.options,m=e.required,b=e.mode,f=e.placeholder,j=e.isClearable,p=e.externalErrorMessage,O=Object(l.d)(),h=O.register,v=O.errors,g=O.formState,x=g.touched,y=g.isSubmitted,q=O.setValue,C=O.watch,N=u.a.errorMessage(t,v,x,y,p),M=C(t);Object(i.useEffect)((function(){h({name:t})}),[h,t]);var w=function(){return M?M.map((function(e){return d.find((function(n){return n.value===e}))})):[]},B=function(){var n=e.options;return null!=M?n.find((function(e){return e.value===M})):null},S=function(n){if(!n)return q(t,[],{shouldValidate:!0}),void(e.onChange&&e.onChange([]));var r=n.map((function(e){return e?e.value:e})).filter((function(e){return null!=e}));q(t,r,{shouldValidate:!0}),e.onChange&&e.onChange(r)},k=function(n){if(!n)return q(t,null,{shouldValidate:!0}),void(e.onChange&&e.onChange(null));q(t,n.value,{shouldValidate:!0}),e.onChange&&e.onChange(n.value)},Y=Boolean(N)?{container:function(e){return Object(r.a)(Object(r.a)({},e),{},{color:"hsl(0,0%,20%)"})},control:function(e){return Object(r.a)(Object(r.a)({},e),{},{borderColor:"red"})}}:{container:function(e){return Object(r.a)(Object(r.a)({},e),{},{color:"hsl(0,0%,20%)"})}};return Object(a.jsxs)("div",{className:"form-group",children:[Boolean(n)&&Object(a.jsx)("label",{className:"col-form-label ".concat(m?"required":null),children:n}),Object(a.jsx)("br",{}),Object(a.jsx)(o.a,{className:"w-100",value:"multiple"===e.mode?w():B(),onChange:function(n){return"multiple"===e.mode?S(n):k(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},id:t,name:t,options:d,isMulti:"multiple"===b,placeholder:f||"",isClearable:j,styles:Y,loadingMessage:function(){return Object(c.c)("autocomplete.loading")},noOptionsMessage:function(){return Object(c.c)("autocomplete.noOptions")}}),Object(a.jsx)("div",{className:"invalid-feedback",children:N}),Boolean(s)&&Object(a.jsx)("small",{className:"form-text text-muted",children:s})]})}s.defaultProps={required:!1,isClearable:!0},n.a=s},627:function(e,n,t){"use strict";var r=t(127);function a(){var e=Object(r.a)(["\n  .btn.btn-link {\n    padding-left: 0;\n  }\n"]);return a=function(){return e},e}var i=t(128).a.div(a());n.a=i},648:function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.d(n,"a",(function(){return r}))},649:function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}t.d(n,"a",(function(){return a}))},650:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var r=t(656),a=t(657);function i(e,n){return!n||"object"!==Object(r.a)(n)&&"function"!==typeof n?Object(a.a)(e):n}},651:function(e,n,t){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.d(n,"a",(function(){return r}))},653:function(e,n,t){"use strict";function r(e,n){return(r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function a(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&r(e,n)}t.d(n,"a",(function(){return a}))},654:function(e,n,t){"use strict";var r=t(11),a=(t(5),t(606)),i=t(608);function o(e){var n=e.defaultValue,t=e.maxValue,o=e.label,c=e.name,l=e.hint,u=e.type,s=e.placeholder,d=e.autoFocus,m=e.autoComplete,b=e.required,f=e.externalErrorMessage,j=e.disabled,p=Object(a.d)(),O=p.register,h=p.errors,v=p.formState,g=v.touched,x=v.isSubmitted,y=i.a.errorMessage(c,h,g,x,f);return Object(r.jsxs)("div",{className:"form-group",children:[Boolean(o)&&Object(r.jsx)("label",{className:"col-form-label ".concat(b?"required":null),htmlFor:c,children:o}),Object(r.jsx)("input",{value:n,max:t,id:c,name:c,type:u,ref:O,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:s||void 0,autoFocus:d||void 0,autoComplete:m||void 0,disabled:j,className:"form-control ".concat(y?"is-invalid":"")}),Object(r.jsx)("div",{className:"invalid-feedback",children:y}),Boolean(l)&&Object(r.jsx)("small",{className:"form-text text-muted",children:l})]})}o.defaultProps={type:"number",required:!1},n.a=o},656:function(e,n,t){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.d(n,"a",(function(){return r}))},657:function(e,n,t){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(n,"a",(function(){return r}))},665:function(e,n,t){"use strict";var r=t(11),a=t(5),i=t(606),o=t(608),c=t(234),l=t.n(c);t(669);function u(e){var n=e.label,t=e.name,c=e.hint,u=e.placeholder,s=e.autoFocus,d=e.externalErrorMessage,m=e.required,b=e.showTimeInput,f=Object(i.d)(),j=f.register,p=f.errors,O=f.formState,h=O.touched,v=O.isSubmitted,g=f.setValue,x=f.watch;Object(a.useEffect)((function(){j({name:t})}),[j,t]);var y=o.a.errorMessage(t,p,h,v,d);return Object(r.jsxs)("div",{className:"form-group",children:[Boolean(n)&&Object(r.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:t,children:n})," ",Object(r.jsx)("br",{}),Object(r.jsx)(l.a,{popperPlacement:"right",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",id:t,name:t,className:"form-control ".concat(y?"is-invalid":""),onChange:function(n){g(t,n,{shouldValidate:!0}),e.onChange&&e.onChange(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},selected:x(t),showTimeInput:b,placeholderText:u||"",autoFocus:s||void 0,autoComplete:"off",dateFormat:"dd-MM-yyyy",timeIntervals:15}),Object(r.jsx)("div",{className:"invalid-feedback",children:y}),Boolean(c)&&Object(r.jsx)("small",{className:"form-text text-muted",children:c})]})}u.defaultProps={required:!1},n.a=u},677:function(e,n,t){"use strict";function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"a",(function(){return r}))},884:function(e,n,t){"use strict";t.r(n);var r=t(145),a=t(11),i=t(5),o=t(35),c=t(32),l=t(2),u=t(110),s=t(4),d=function(e){return e.campagne.form},m=Object(s.a)([d],(function(e){return e.record})),b={selectInitLoading:Object(s.a)([d],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:Object(s.a)([d],(function(e){return Boolean(e.saveLoading)})),selectRecord:m,selectRaw:d},f=t(7),j=t(0),p=t(606),O=t(616),h=t(607),v=t(620),g=t(39),x=t(618),y=t(613),q=t(654),C=t(626),N=t(277),M=t(55),w=t.n(M),B=t(665),S=t(627),k=t(614),Y=t(615),D=g.e().shape({titre:O.a.string(Object(l.c)("entities.campagne.fields.titre"),{required:!0}),annee:O.a.integer(Object(l.c)("entities.campagne.fields.annee"),{required:!0}),datedebut:O.a.date(Object(l.c)("entities.campagne.fields.datedebut"),{required:!0}),datefin:O.a.date(Object(l.c)("entities.campagne.fields.datefin"),{required:!0}),statut:O.a.enumerator(Object(l.c)("entities.campagne.fields.statut"),{required:!0,options:N.a.statut}),details:O.a.relationToMany(Object(l.c)("entities.campagne.fields.details"),{})});var V=function(e){var n=Object(i.useState)((function(){var n=e.record||{};return{titre:n.titre,annee:n.annee,datedebut:n.datedebut?w()(n.datedebut,"YYYY-MM-DD").toDate():null,datefin:n.datefin?w()(n.datefin,"YYYY-MM-DD").toDate():null,statut:n.statut,details:n.details||[]}})),t=Object(r.a)(n,1)[0],o=Object(p.c)({resolver:Object(x.yupResolver)(D),mode:"all",defaultValues:t}),c=function(n){var t;e.onSubmit(null===(t=e.record)||void 0===t?void 0:t.id,n)};return Object(a.jsx)(v.a,{children:Object(a.jsx)(p.a,Object(j.a)(Object(j.a)({},o),{},{children:Object(a.jsxs)("form",{onSubmit:o.handleSubmit(c),children:[Object(a.jsxs)(S.a,{children:[Object(a.jsxs)(k.a,{style:{backgroundColor:"#f0f2f5",paddingBottom:"10px"},children:[Object(a.jsx)(Y.a,{sm:8,children:Object(a.jsx)(y.a,{name:"titre",label:Object(l.c)("entities.campagne.fields.titre"),required:!0,autoFocus:!0})}),Object(a.jsx)(Y.a,{sm:4,children:Object(a.jsx)(C.a,{name:"statut",label:Object(l.c)("entities.campagne.fields.statut"),options:N.a.statut.map((function(e){return{value:e,label:Object(l.c)("entities.campagne.enumerators.statut.".concat(e))}})),required:!0})})]}),Object(a.jsxs)(k.a,{children:[Object(a.jsx)(Y.a,{sm:4,children:Object(a.jsx)(B.a,{name:"datedebut",label:Object(l.c)("entities.campagne.fields.datedebut"),required:!0})}),Object(a.jsx)(Y.a,{sm:4,children:Object(a.jsx)(B.a,{name:"datefin",label:Object(l.c)("entities.campagne.fields.datefin"),required:!0})}),Object(a.jsx)(Y.a,{sm:4,children:Object(a.jsx)(q.a,{name:"annee",label:Object(l.c)("entities.campagne.fields.annee"),required:!0})})]})]}),Object(a.jsxs)("div",{className:"form-buttons",children:[Object(a.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:o.handleSubmit(c),children:[Object(a.jsx)(h.a,{loading:e.saveLoading,iconClass:"far fa-save"})," ",Object(l.c)("common.save")]}),Object(a.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(t).forEach((function(e){o.setValue(e,t[e])}))},children:[Object(a.jsx)("i",{className:"fas fa-undo"})," ",Object(l.c)("common.reset")]}),e.onCancel?Object(a.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[Object(a.jsx)("i",{className:"fas fa-times"})," ",Object(l.c)("common.cancel")]}):null]})]})}))})},E=t(609),F=t(611),L=t(612),P=t(610);n.default=function(e){var n=Object(i.useState)(!1),t=Object(r.a)(n,2),s=t[0],d=t[1],m=Object(o.d)(),j=Object(c.h)(),p=Object(o.e)(b.selectInitLoading),O=Object(o.e)(b.selectSaveLoading),h=Object(o.e)(b.selectRecord),v=Boolean(j.params.id),g=v?Object(l.c)("entities.campagne.edit.title"):Object(l.c)("entities.campagne.new.title");return Object(i.useEffect)((function(){m(u.a.doInit(j.params.id)),d(!0)}),[m,j.params.id]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(F.a,{items:[[Object(l.c)("dashboard.menu"),"/"],[Object(l.c)("entities.campagne.menu"),"/campagne"],[g]]}),Object(a.jsxs)(E.a,{children:[Object(a.jsx)(P.a,{children:g}),p&&Object(a.jsx)(L.a,{}),s&&!p&&Object(a.jsx)(V,{saveLoading:O,initLoading:p,record:h,isEditing:v,onSubmit:function(e,n){m(v?u.a.doUpdate(e,n):u.a.doCreate(n))},onCancel:function(){return Object(f.b)().push("/campagne")}})]})]})}}}]);