(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[54],{608:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var r=t(15),a=t(16),i=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"errorMessage",value:function(e,n,t,r){var a,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(i)return i;if(!r&&!t[e])return null;var o=n[e];return(null===o||void 0===o||null===(a=o[0])||void 0===a?void 0:a.message)||(null===o||void 0===o?void 0:o.message)||o||null}}]),e}()},613:function(e,n,t){"use strict";var r=t(11),a=(t(5),t(606)),i=t(608);function o(e){var n=e.defaultValue,t=e.label,o=e.name,c=e.hint,u=e.type,l=e.placeholder,s=e.autoFocus,d=e.autoComplete,b=e.required,f=e.externalErrorMessage,m=e.disabled,j=e.endAdornment,p=Object(a.d)(),h=p.register,O=p.errors,v=p.formState,g=v.touched,x=v.isSubmitted,y=i.a.errorMessage(o,O,g,x,f);return Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsxs)("div",{className:j?"input-group":"",children:[Boolean(t)&&Object(r.jsx)("label",{className:"col-form-label ".concat(b?"required":null),htmlFor:o,children:t}),Object(r.jsx)("input",{value:n,id:o,name:o,type:u,ref:h,onChange:function(n){e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},placeholder:l||void 0,autoFocus:s||void 0,autoComplete:d||void 0,disabled:m,className:"form-control ".concat(y?"is-invalid":"")}),j&&Object(r.jsx)("div",{className:"input-group-append",children:Object(r.jsx)("span",{className:"input-group-text",children:j})})]}),Object(r.jsx)("div",{className:"invalid-feedback",children:y}),Boolean(c)&&Object(r.jsx)("small",{className:"form-text text-muted",children:c})]})}o.defaultProps={type:"text",required:!1},n.a=o},616:function(e,n,t){"use strict";var r=t(19),a=t(39),i=t(2),o=t(55),c=t.n(o),u={generic:e=>a.c().label(e),string(e,n){n=n||{};var t=a.h().transform((function(e,n){return""===n?null:e})).nullable(!0).trim().label(e);return n.required&&(t=t.required()),(n.min||0===n.min)&&(t=t.min(n.min)),n.max&&(t=t.max(n.max)),n.matches&&(t=t.matches(n.matches)),t},boolean:(e,n)=>a.b().default(!1).label(e),relationToOne(e,n){n=n||{};var t=a.c().nullable(!0).label(e).transform((function(e,n){return n?n.id:null}));return n.required&&(t=t.required()),t},stringArray(e,n){n=n||{};var t=a.a().compact().ensure().of(a.h().transform((function(e,n){return""===n?null:e})).trim()).label(e);return(n.required||n.min)&&(t=t.required()),n.min||0===n.min?t=t.min(n.min):n.required&&(t=t.min(1)),n.max&&(t=t.max(n.max)),t},relationToMany(e,n){n=n||{};var t=a.a().nullable(!0).label(e).transform((function(e,n){return n&&n.length?n.map((function(e){return e.id})):[]}));return(n.required||n.min)&&(t=t.required()),n.min||0===n.min?t=t.min(n.min):n.required&&(t=t.min(1)),n.max&&(t=t.max(n.max)),t},integer(e,n){n=n||{};var t=a.d().transform((function(e,n){return""===n?null:e})).integer().nullable(!0).label(e);return n.required&&(t=t.required()),(n.min||0===n.min)&&(t=t.min(n.min)),n.max&&(t=t.max(n.max)),t},images(e,n){n=n||{};var t=a.a().nullable(!0).label(e);return(n.required||n.min)&&(t=t.required()),n.min||0===n.min?t=t.min(n.min):n.required&&(t=t.min(1)),n.max&&(t=t.max(n.max)),t},files(e,n){n=n||{};var t=a.a().compact().ensure().nullable(!0).label(e);return(n.required||n.min)&&(t=t.required()),n.min||0===n.min?t=t.min(n.min):n.required&&(t=t.min(1)),n.max&&(t=t.max(n.max)),t},enumerator(e,n){n=n||{};var t=a.h().transform((function(e,n){return""===n?null:e})).label(e).nullable(!0).oneOf([null].concat(Object(r.a)(n.options||[])));return n.required&&(t=t.required(Object(i.c)("validation.string.selected"))),t},email(e,n){n=n||{};var t=a.h().transform((function(e,n){return""===n?null:e})).nullable(!0).trim().label(e).email();return n.required&&(t=t.required()),(n.min||0===n.min)&&(t=t.min(n.min)),n.max&&(t=t.max(n.max)),n.matches&&(t=t.matches(n.matches)),t},decimal(e,n){n=n||{};var t=a.d().transform((function(e,n){return""===n?null:e})).nullable(!0).label(e);return n.required&&(t=t.required()),(n.min||0===n.min)&&(t=t.min(n.min)),n.max&&(t=t.max(n.max)),t},datetime(e,n){n=n||{};var t=a.c().nullable(!0).label(e).transform((function(e,n){return e?c()(n,"YYYY-MM-DD HH:mm").toISOString():null}));return n.required&&(t=t.required()),t},date(e,n){n=n||{};var t=a.c().nullable(!0).label(e).test("is-date",Object(i.c)("validation.mixed.default"),(function(e){return!e||c()(e,"YYYY-MM-DD").isValid()})).transform((function(e){return e?c()(e).format("YYYY-MM-DD"):null}));return n.required&&(t=t.required()),t}};n.a=u},626:function(e,n,t){"use strict";var r=t(0),a=t(11),i=t(5),o=t(628),c=t(2),u=t(606),l=t(608);function s(e){var n=e.label,t=e.name,s=e.hint,d=e.options,b=e.required,f=e.mode,m=e.placeholder,j=e.isClearable,p=e.externalErrorMessage,h=Object(u.d)(),O=h.register,v=h.errors,g=h.formState,x=g.touched,y=g.isSubmitted,q=h.setValue,w=h.watch,C=l.a.errorMessage(t,v,x,y,p),S=w(t);Object(i.useEffect)((function(){O({name:t})}),[O,t]);var k=function(){return S?S.map((function(e){return d.find((function(n){return n.value===e}))})):[]},N=function(){var n=e.options;return null!=S?n.find((function(e){return e.value===S})):null},T=function(n){if(!n)return q(t,[],{shouldValidate:!0}),void(e.onChange&&e.onChange([]));var r=n.map((function(e){return e?e.value:e})).filter((function(e){return null!=e}));q(t,r,{shouldValidate:!0}),e.onChange&&e.onChange(r)},B=function(n){if(!n)return q(t,null,{shouldValidate:!0}),void(e.onChange&&e.onChange(null));q(t,n.value,{shouldValidate:!0}),e.onChange&&e.onChange(n.value)},M=Boolean(C)?{container:function(e){return Object(r.a)(Object(r.a)({},e),{},{color:"hsl(0,0%,20%)"})},control:function(e){return Object(r.a)(Object(r.a)({},e),{},{borderColor:"red"})}}:{container:function(e){return Object(r.a)(Object(r.a)({},e),{},{color:"hsl(0,0%,20%)"})}};return Object(a.jsxs)("div",{className:"form-group",children:[Boolean(n)&&Object(a.jsx)("label",{className:"col-form-label ".concat(b?"required":null),children:n}),Object(a.jsx)("br",{}),Object(a.jsx)(o.a,{className:"w-100",value:"multiple"===e.mode?k():N(),onChange:function(n){return"multiple"===e.mode?T(n):B(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},id:t,name:t,options:d,isMulti:"multiple"===f,placeholder:m||"",isClearable:j,styles:M,loadingMessage:function(){return Object(c.c)("autocomplete.loading")},noOptionsMessage:function(){return Object(c.c)("autocomplete.noOptions")}}),Object(a.jsx)("div",{className:"invalid-feedback",children:C}),Boolean(s)&&Object(a.jsx)("small",{className:"form-text text-muted",children:s})]})}s.defaultProps={required:!1,isClearable:!0},n.a=s},628:function(e,n,t){"use strict";t(694),t(146),t(695),t(659),t(38);var r=t(648),a=t(649),i=(t(22),t(653)),o=t(650),c=t(651),u=t(5),l=t.n(u),s=t(684),d=t(681),b=(t(121),t(698),t(619)),f=(t(675),t(699),t(683),t(700)),m=t(693);function j(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=Object(c.a)(e);if(n){var a=Object(c.a)(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return Object(o.a)(this,t)}}u.Component;var p=Object(f.a)(b.a);n.a=p},648:function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.d(n,"a",(function(){return r}))},649:function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}t.d(n,"a",(function(){return a}))},650:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var r=t(656),a=t(657);function i(e,n){return!n||"object"!==Object(r.a)(n)&&"function"!==typeof n?Object(a.a)(e):n}},651:function(e,n,t){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.d(n,"a",(function(){return r}))},653:function(e,n,t){"use strict";function r(e,n){return(r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function a(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&r(e,n)}t.d(n,"a",(function(){return a}))},656:function(e,n,t){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.d(n,"a",(function(){return r}))},657:function(e,n,t){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(n,"a",(function(){return r}))},659:function(e,n,t){var r=t(660),a=t(661),i=t(696),o=t(662);e.exports=function(e){return r(e)||a(e)||i(e)||o()}},660:function(e,n,t){var r=t(697);e.exports=function(e){if(Array.isArray(e))return r(e)}},661:function(e,n){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},662:function(e,n){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},677:function(e,n,t){"use strict";function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"a",(function(){return r}))},705:function(e,n,t){"use strict";var r=t(127);function a(){var e=Object(r.a)(["\n  width: 500px;\n  height: 100%;\n  min-height: 100%;\n  overflow-y: auto;\n  z-index: 1;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  padding: 56px 40px;\n  position: relative;\n  background-color: rgba(0, 0, 0, 0.8);\n  color: white;\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    color: white;\n  }\n\n  h4 {\n    font-size: 1.25em;\n  }\n\n  a,\n  a:hover {\n    color: white;\n  }\n\n  .btn-link,\n  .btn-link:hover {\n    color: white;\n  }\n\n  .invalid-feedback {\n    display: block;\n  }\n\n  @media only screen and (max-width: 767px) {\n    width: 100%;\n  }\n"]);return a=function(){return e},e}var i=t(128).a.div(a());n.a=i},706:function(e,n,t){"use strict";var r=t(127);function a(){var e=Object(r.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 48px;\n  justify-content: center;\n  align-items: center;\n  flex-shrink: 0;\n  color: white;\n\n  h1 {\n    margin-bottom: 0;\n  }\n"]);return a=function(){return e},e}var i=t(128).a.div(a());n.a=i},707:function(e,n,t){"use strict";var r=t(127);function a(){var e=Object(r.a)(["\n  width: 100%;\n  min-height: 100vh;\n  height: 100vh;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  position: relative;\n  background-size: cover;\n\n  &:before {\n    content: '';\n    width: 100%;\n    height: 100%;\n    display: flex;\n    background-color: rgba(0, 0, 0, 0.5);\n    position: absolute;\n    z-index: 1;\n    top: 0;\n  }\n"]);return a=function(){return e},e}var i=t(128).a.div(a());n.a=i},713:function(e,n,t){"use strict";var r=t(127);function a(){var e=Object(r.a)(["\n  margin-top: 24px;\n  text-align: center;\n"]);return a=function(){return e},e}var i=t(128).a.div(a());n.a=i},784:function(e,n,t){"use strict";var r=t(4),a=function(e){return e.tenant.form},i=Object(r.a)([a],(function(e){return e.record})),o={selectInitLoading:Object(r.a)([a],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:Object(r.a)([a],(function(e){return Boolean(e.saveLoading)})),selectRecord:i,selectRaw:a};n.a=o},860:function(e,n,t){"use strict";t.r(n);var r=t(145),a=t(11),i=t(2),o=t(23),c=t(29),u=t(5),l=t(35),s=t(705),d=t(706),b=t(713),f=t(707),m=t(0),j=t(606),p=t(616),h=t(104),O=t(784),v=t(613),g=t(39),x=t(34);var y=t(31),q=t(618),w=g.e().shape({name:p.a.string(Object(i.c)("tenant.fields.tenantName"),{required:!0,max:50}),url:p.a.string(Object(i.c)("tenant.fields.tenantUrl"),{required:!0,max:50}).matches(/^[a-z0-9][-a-zA-Z0-9]*$/,Object(i.c)("tenant.validation.url"))}),C=g.e().shape({name:p.a.string(Object(i.c)("tenant.fields.tenantName"),{required:!0,max:50})}),S=y.a.isEnabled?w:C;var k=function(e){var n=Object(l.d)(),t=Object(u.useState)({name:""}),o=Object(r.a)(t,1)[0],s=Object(j.c)({resolver:Object(q.yupResolver)(S),mode:"onSubmit",defaultValues:o}),d=Object(l.e)(O.a.selectSaveLoading),b=Object(l.e)(c.a.selectInvitedTenants);return Object(a.jsx)(j.a,Object(m.a)(Object(m.a)({},s),{},{children:Object(a.jsxs)("form",{onSubmit:s.handleSubmit((function(e){n(h.a.doCreate(e))})),children:[Object(a.jsx)(v.a,{name:"name",label:Object(i.c)("tenant.fields.tenantName"),autoComplete:"name",onChange:function(e){s.setValue("url",e.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-"))},autoFocus:!0}),y.a.isEnabled&&Object(a.jsx)(v.a,{name:"url",placeholder:Object(i.c)("tenant.fields.tenantUrl"),endAdornment:".".concat(x.default.frontendUrl.host)}),Object(a.jsx)("button",{style:{marginTop:"16px"},type:"submit",className:"btn btn-primary btn-block",disabled:d,children:Object(i.c)("tenant.create.button")}),Boolean(b.length)&&Object(a.jsx)("button",{style:{marginTop:"16px"},type:"button",className:"btn btn-light btn-block",onClick:e.onViewToggle,children:Object(i.c)("tenant.invitation.view")})]})}))},N=t(97),T=t(270),B=t(626),M={statut:[t(80).a.get_adherent]},V=g.e().shape({id:p.a.string(Object(i.c)("tenant.fields.tenantId")),phoneNumber:p.a.string(Object(i.c)("user.fields.phoneNumber"),{matches:/^[0-9]/,max:24}),secteur:p.a.stringArray(Object(i.c)("user.fields.secteur"),{required:!0,min:1}),employeur:p.a.string(Object(i.c)("Employeur"),{required:!0}),profession:p.a.string(Object(i.c)("Profession"),{required:!0}),adresse:p.a.string(Object(i.c)("user.fields.adresse"),{required:!0}),fullName:p.a.string(Object(i.c)("user.fields.fullName"),{required:!0}),cin:p.a.integer(Object(i.c)("user.fields.cin"),{required:!0}),date_naissance:p.a.date(Object(i.c)("Date Naissance"),{required:!0}),etat_civil:p.a.stringArray(Object(i.c)("user.fields.Etat_Civil"),{required:!0,min:1}),status:p.a.stringArray(Object(i.c)("user.fields.status"),{required:!0,min:1}),lien_facebook:p.a.string(Object(i.c)("Lien Facebook"),{required:!1}),parrain:p.a.enumerator(Object(i.c)("user.fields.parrain"),{options:M.statut})});var _=function(e){var n=Object(l.d)(),t=Object(l.e)(T.a.selectLoading),o=Object(l.e)(c.a.selectInvitedTenants),s=Object(l.e)(c.a.selectCurrentUser),d=Object(u.useState)({id:o[0].id}),b=Object(r.a)(d,1)[0],f=Object(j.c)({resolver:Object(q.yupResolver)(V),mode:"onSubmit",defaultValues:b});return Object(a.jsx)(j.a,Object(m.a)(Object(m.a)({},f),{},{children:Object(a.jsxs)("form",{onSubmit:f.handleSubmit((function(e){var t=e.id,r=s.tenants.find((function(e){return e.tenant.id===t}));n(N.a.doAccept(r.invitationToken))})),children:[Object(a.jsx)(B.a,{name:"id",label:Object(i.c)("tenant.fields.tenantId"),options:o.map((function(e){return{value:e.id,label:e.name}}))}),Object(a.jsx)("button",{style:{marginTop:"16px"},type:"submit",className:"btn btn-primary btn-block",disabled:t,children:Object(i.c)("tenant.invitation.accept")}),Object(a.jsx)("button",{style:{marginTop:"16px"},type:"button",className:"btn btn-light btn-block",onClick:e.onViewToggle,children:Object(i.c)("tenant.new.title")})]})}))};n.default=function(){var e=Object(u.useState)("form"),n=Object(r.a)(e,2),t=n[0],m=n[1],j=Object(l.d)(),p=Object(l.e)(c.a.selectInvitedTenants),h=Object(l.e)(c.a.selectBackgroundImageUrl),O=Object(l.e)(c.a.selectLogoUrl);Object(u.useEffect)((function(){m(p.length?"select":"form")}),[p]);var v=function(){m((function(e){return"form"===e?"select":"form"}))};return Object(a.jsx)(f.a,{style:{backgroundImage:"url(".concat(h||"/images/tenant.jpg",")")},children:Object(a.jsxs)(s.a,{children:[Object(a.jsx)(d.a,{children:O?Object(a.jsx)("img",{src:O,width:"240px",alt:Object(i.c)("app.title")}):Object(a.jsx)("h1",{children:Object(i.c)("app.title")})}),"form"===t?Object(a.jsx)(k,{onViewToggle:v}):Object(a.jsx)(_,{onViewToggle:v}),Object(a.jsx)(b.a,{children:Object(a.jsx)("button",{className:"btn btn-sm btn-link",type:"button",onClick:function(){j(o.a.doSignout())},children:Object(i.c)("auth.signout")})})]})})}}}]);